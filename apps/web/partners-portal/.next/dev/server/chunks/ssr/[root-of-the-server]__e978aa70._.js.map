{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/StatsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StatsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call StatsCard() from the server but StatsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/StatsCard.tsx <module evaluation>\",\n    \"StatsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,yaAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,wGACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/StatsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StatsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call StatsCard() from the server but StatsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/StatsCard.tsx\",\n    \"StatsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,yaAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,oFACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/TierDisplay.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const TierDisplay = registerClientReference(\n    function() { throw new Error(\"Attempted to call TierDisplay() from the server but TierDisplay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/TierDisplay.tsx <module evaluation>\",\n    \"TierDisplay\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,0GACA","ignoreList":[0]}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/TierDisplay.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const TierDisplay = registerClientReference(\n    function() { throw new Error(\"Attempted to call TierDisplay() from the server but TierDisplay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/TierDisplay.tsx\",\n    \"TierDisplay\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,sFACA","ignoreList":[0]}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/RatingFactorsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RatingFactorsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call RatingFactorsCard() from the server but RatingFactorsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/RatingFactorsCard.tsx <module evaluation>\",\n    \"RatingFactorsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,yaAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,gHACA","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/RatingFactorsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RatingFactorsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call RatingFactorsCard() from the server but RatingFactorsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/RatingFactorsCard.tsx\",\n    \"RatingFactorsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,yaAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,4FACA","ignoreList":[0]}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/AlertsList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AlertsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call AlertsList() from the server but AlertsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/AlertsList.tsx <module evaluation>\",\n    \"AlertsList\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,aAAa,IAAA,yaAAuB,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAoO,GACjQ,yGACA","ignoreList":[0]}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/AlertsList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AlertsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call AlertsList() from the server but AlertsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/AlertsList.tsx\",\n    \"AlertsList\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,aAAa,IAAA,yaAAuB,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAoO,GACjQ,qFACA","ignoreList":[0]}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/RecentDeals.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RecentDeals = registerClientReference(\n    function() { throw new Error(\"Attempted to call RecentDeals() from the server but RecentDeals is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/RecentDeals.tsx <module evaluation>\",\n    \"RecentDeals\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,0GACA","ignoreList":[0]}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/dashboard/RecentDeals.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RecentDeals = registerClientReference(\n    function() { throw new Error(\"Attempted to call RecentDeals() from the server but RecentDeals is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/dashboard/RecentDeals.tsx\",\n    \"RecentDeals\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,sFACA","ignoreList":[0]}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function formatCurrency(amount: number, currency: string = 'USD'): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatDate(date: string | Date, locale: string = 'en-US'): string {\n  return new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  }).format(new Date(date));\n}\n\nexport function formatDateTime(date: string | Date, locale: string = 'en-US'): string {\n  return new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  }).format(new Date(date));\n}\n\nexport function getInitials(name: string): string {\n  return name\n    .split(' ')\n    .map((n) => n[0])\n    .join('')\n    .toUpperCase()\n    .slice(0, 2);\n}\n\nexport function getDomainFromEmail(email: string): string {\n  return email.split('@')[1]?.toLowerCase() || '';\n}\n\nexport function normalizeDomain(domain: string): string {\n  return domain.toLowerCase().replace(/^(https?:\\/\\/)?(www\\.)?/, '').split('/')[0];\n}\n\nimport type { MEDDICScores } from '@/types';\n\nexport function calculateMEDDICAverage(scores: MEDDICScores): number {\n  const values = Object.values(scores);\n  if (values.length === 0) return 0;\n  return values.reduce((sum, val) => sum + val, 0) / values.length;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB;AAEO,SAAS,eAAe,MAAc,EAAE,WAAmB,KAAK;IACrE,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP;QACA,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,WAAW,IAAmB,EAAE,SAAiB,OAAO;IACtE,OAAO,IAAI,KAAK,cAAc,CAAC,QAAQ;QACrC,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB;AAEO,SAAS,eAAe,IAAmB,EAAE,SAAiB,OAAO;IAC1E,OAAO,IAAI,KAAK,cAAc,CAAC,QAAQ;QACrC,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB;AAEO,SAAS,YAAY,IAAY;IACtC,OAAO,KACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EACf,IAAI,CAAC,IACL,WAAW,GACX,KAAK,CAAC,GAAG;AACd;AAEO,SAAS,mBAAmB,KAAa;IAC9C,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,iBAAiB;AAC/C;AAEO,SAAS,gBAAgB,MAAc;IAC5C,OAAO,OAAO,WAAW,GAAG,OAAO,CAAC,2BAA2B,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;AAClF;AAIO,SAAS,uBAAuB,MAAoB;IACzD,MAAM,SAAS,OAAO,MAAM,CAAC;IAC7B,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;IAChC,OAAO,OAAO,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,KAAK,KAAK,OAAO,MAAM;AAClE"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/RewardsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RewardsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call RewardsCard() from the server but RewardsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/RewardsCard.tsx <module evaluation>\",\n    \"RewardsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wGACA","ignoreList":[0]}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/RewardsCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RewardsCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call RewardsCard() from the server but RewardsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/RewardsCard.tsx\",\n    \"RewardsCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,yaAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oFACA","ignoreList":[0]}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/AchievementsPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AchievementsPanel = registerClientReference(\n    function() { throw new Error(\"Attempted to call AchievementsPanel() from the server but AchievementsPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/AchievementsPanel.tsx <module evaluation>\",\n    \"AchievementsPanel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,yaAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,8GACA","ignoreList":[0]}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/AchievementsPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AchievementsPanel = registerClientReference(\n    function() { throw new Error(\"Attempted to call AchievementsPanel() from the server but AchievementsPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/AchievementsPanel.tsx\",\n    \"AchievementsPanel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,yaAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,0FACA","ignoreList":[0]}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/LeaderboardCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LeaderboardCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call LeaderboardCard() from the server but LeaderboardCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/LeaderboardCard.tsx <module evaluation>\",\n    \"LeaderboardCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,kBAAkB,IAAA,yaAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,4GACA","ignoreList":[0]}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/components/portal/rewards/LeaderboardCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LeaderboardCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call LeaderboardCard() from the server but LeaderboardCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/portal/rewards/LeaderboardCard.tsx\",\n    \"LeaderboardCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,kBAAkB,IAAA,yaAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,wFACA","ignoreList":[0]}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/types.ts"],"sourcesContent":["// ============ Rewards System Types ============\n\n/**\n * Actions that can earn reward points\n */\nexport type RewardAction =\n  | 'DEAL_CLOSED'\n  | 'TRAINING_COMPLETED'\n  | 'COPILOT_SESSION'\n  | 'REFERRAL'\n  | 'DOCUMENT_SIGNED'\n  | 'POSITIVE_REVIEW'\n  | 'LOGIN_STREAK_7'\n  | 'FIRST_DEAL_MONTH';\n\n/**\n * Points awarded for each action\n */\nexport const REWARD_POINTS: Record<RewardAction, number> = {\n  DEAL_CLOSED: 100,\n  TRAINING_COMPLETED: 50,\n  COPILOT_SESSION: 10,\n  REFERRAL: 200,\n  DOCUMENT_SIGNED: 25,\n  POSITIVE_REVIEW: 75,\n  LOGIN_STREAK_7: 30,\n  FIRST_DEAL_MONTH: 50,\n};\n\n/**\n * Reward milestones that trigger special events\n */\nexport const REWARD_MILESTONES = [1000, 5000, 10000] as const;\nexport type RewardMilestone = typeof REWARD_MILESTONES[number];\n\n/**\n * Partner tier for rewards\n */\nexport type PartnerTier = 'bronze' | 'silver' | 'gold' | 'platinum';\n\n/**\n * Achievement categories\n */\nexport type AchievementCategory = 'deals' | 'training' | 'engagement' | 'milestones';\n\n/**\n * Achievement interface\n */\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  category: AchievementCategory;\n  points: number;\n  iconName: string;\n  condition: (stats: PartnerStats) => boolean;\n}\n\n/**\n * Partner statistics for rewards\n */\nexport interface PartnerStats {\n  dealsWon: number;\n  trainingsCompleted: number;\n  copilotSessions: number;\n  referrals: number;\n  loginStreak: number;\n  totalPoints: number;\n}\n\n/**\n * Record of points awarded for an action\n */\nexport interface PointsAwarded {\n  partnerId: string;\n  action: RewardAction;\n  points: number;\n  newTotal: number;\n  milestoneReached?: RewardMilestone;\n  achievementsUnlocked: string[];\n  timestamp: string;\n}\n\n/**\n * Overall reward status for a partner\n */\nexport interface RewardStatus {\n  partnerId: string;\n  totalPoints: number;\n  tier: PartnerTier;\n  achievements: string[];\n  nextMilestone: RewardMilestone | null;\n  pointsToNextMilestone: number;\n  leaderboardPosition: number | null;\n}\n\n/**\n * Leaderboard entry\n */\nexport interface LeaderboardEntry {\n  partnerId: string;\n  partnerName: string;\n  points: number;\n  tier: PartnerTier;\n  position: number;\n}\n"],"names":[],"mappings":"AAAA,iDAAiD;AAEjD;;CAEC;;;;;;AAcM,MAAM,gBAA8C;IACzD,aAAa;IACb,oBAAoB;IACpB,iBAAiB;IACjB,UAAU;IACV,iBAAiB;IACjB,iBAAiB;IACjB,gBAAgB;IAChB,kBAAkB;AACpB;AAKO,MAAM,oBAAoB;IAAC;IAAM;IAAM;CAAM"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/calculator.ts"],"sourcesContent":["import { REWARD_POINTS, REWARD_MILESTONES, type RewardAction, type RewardMilestone } from './types';\n\n/**\n * Get points for a specific action\n */\nexport function calculatePointsForAction(action: RewardAction): number {\n  return REWARD_POINTS[action];\n}\n\n/**\n * Check if a milestone was reached between old and new point totals\n * Returns the milestone value if reached, null otherwise\n */\nexport function checkMilestoneReached(\n  oldPoints: number,\n  newPoints: number\n): RewardMilestone | null {\n  // Find milestones that were crossed\n  const crossedMilestones = REWARD_MILESTONES.filter(\n    (milestone) => oldPoints < milestone && newPoints >= milestone\n  );\n\n  // Return the highest milestone crossed, or null if none\n  return crossedMilestones.length > 0\n    ? crossedMilestones[crossedMilestones.length - 1]\n    : null;\n}\n\n/**\n * Calculate next milestone and points needed\n */\nexport function getNextMilestone(currentPoints: number): {\n  milestone: RewardMilestone | null;\n  pointsNeeded: number;\n} {\n  const nextMilestone = REWARD_MILESTONES.find((m) => m > currentPoints);\n\n  if (!nextMilestone) {\n    return { milestone: null, pointsNeeded: 0 };\n  }\n\n  return {\n    milestone: nextMilestone,\n    pointsNeeded: nextMilestone - currentPoints,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAKO,SAAS,yBAAyB,MAAoB;IAC3D,OAAO,oLAAa,CAAC,OAAO;AAC9B;AAMO,SAAS,sBACd,SAAiB,EACjB,SAAiB;IAEjB,oCAAoC;IACpC,MAAM,oBAAoB,wLAAiB,CAAC,MAAM,CAChD,CAAC,YAAc,YAAY,aAAa,aAAa;IAGvD,wDAAwD;IACxD,OAAO,kBAAkB,MAAM,GAAG,IAC9B,iBAAiB,CAAC,kBAAkB,MAAM,GAAG,EAAE,GAC/C;AACN;AAKO,SAAS,iBAAiB,aAAqB;IAIpD,MAAM,gBAAgB,wLAAiB,CAAC,IAAI,CAAC,CAAC,IAAM,IAAI;IAExD,IAAI,CAAC,eAAe;QAClB,OAAO;YAAE,WAAW;YAAM,cAAc;QAAE;IAC5C;IAEA,OAAO;QACL,WAAW;QACX,cAAc,gBAAgB;IAChC;AACF"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/achievements.ts"],"sourcesContent":["import type { Achievement, PartnerStats } from './types';\n\n/**\n * All available achievements\n */\nexport const ACHIEVEMENTS: Achievement[] = [\n  // Deals category\n  {\n    id: 'first-blood',\n    name: 'First Blood',\n    description: 'Close your first deal',\n    category: 'deals',\n    points: 50,\n    iconName: 'Trophy',\n    condition: (stats) => stats.dealsWon >= 1,\n  },\n  {\n    id: 'hat-trick',\n    name: 'Hat Trick',\n    description: 'Close 3 deals in a month',\n    category: 'deals',\n    points: 100,\n    iconName: 'Target',\n    condition: (stats) => stats.dealsWon >= 3,\n  },\n  {\n    id: 'deal-master',\n    name: 'Deal Master',\n    description: 'Close 10 deals',\n    category: 'deals',\n    points: 200,\n    iconName: 'Award',\n    condition: (stats) => stats.dealsWon >= 10,\n  },\n\n  // Training category\n  {\n    id: 'scholar',\n    name: 'Scholar',\n    description: 'Complete 5 training modules',\n    category: 'training',\n    points: 100,\n    iconName: 'GraduationCap',\n    condition: (stats) => stats.trainingsCompleted >= 5,\n  },\n  {\n    id: 'expert',\n    name: 'Expert',\n    description: 'Complete 10 training modules',\n    category: 'training',\n    points: 200,\n    iconName: 'BookOpen',\n    condition: (stats) => stats.trainingsCompleted >= 10,\n  },\n\n  // Engagement category\n  {\n    id: 'ai-enthusiast',\n    name: 'AI Enthusiast',\n    description: 'Use Copilot 20 times',\n    category: 'engagement',\n    points: 100,\n    iconName: 'Sparkles',\n    condition: (stats) => stats.copilotSessions >= 20,\n  },\n  {\n    id: 'marathon',\n    name: 'Marathon Runner',\n    description: 'Login 30 days in a row',\n    category: 'engagement',\n    points: 150,\n    iconName: 'Flame',\n    condition: (stats) => stats.loginStreak >= 30,\n  },\n  {\n    id: 'networker',\n    name: 'Networker',\n    description: 'Refer 3 new partners',\n    category: 'engagement',\n    points: 300,\n    iconName: 'Users',\n    condition: (stats) => stats.referrals >= 3,\n  },\n\n  // Milestones category\n  {\n    id: 'rising-star',\n    name: 'Rising Star',\n    description: 'Earn 1,000 reward points',\n    category: 'milestones',\n    points: 100,\n    iconName: 'Star',\n    condition: (stats) => stats.totalPoints >= 1000,\n  },\n  {\n    id: 'high-achiever',\n    name: 'High Achiever',\n    description: 'Earn 5,000 reward points',\n    category: 'milestones',\n    points: 250,\n    iconName: 'Zap',\n    condition: (stats) => stats.totalPoints >= 5000,\n  },\n  {\n    id: 'elite',\n    name: 'Elite Partner',\n    description: 'Earn 10,000 reward points',\n    category: 'milestones',\n    points: 500,\n    iconName: 'Crown',\n    condition: (stats) => stats.totalPoints >= 10000,\n  },\n];\n\n/**\n * Check if an achievement condition is met\n */\nexport function checkAchievementUnlocked(\n  achievement: Achievement,\n  stats: PartnerStats\n): boolean {\n  return achievement.condition(stats);\n}\n\n/**\n * Get all achievements that should be unlocked for given stats\n */\nexport function getUnlockedAchievements(\n  stats: PartnerStats,\n  currentlyUnlocked: string[]\n): Achievement[] {\n  return ACHIEVEMENTS.filter(\n    (achievement) =>\n      !currentlyUnlocked.includes(achievement.id) &&\n      checkAchievementUnlocked(achievement, stats)\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAKO,MAAM,eAA8B;IACzC,iBAAiB;IACjB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,QAAQ,IAAI;IAC1C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,QAAQ,IAAI;IAC1C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,QAAQ,IAAI;IAC1C;IAEA,oBAAoB;IACpB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,kBAAkB,IAAI;IACpD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,kBAAkB,IAAI;IACpD;IAEA,sBAAsB;IACtB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,eAAe,IAAI;IACjD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,WAAW,IAAI;IAC7C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,SAAS,IAAI;IAC3C;IAEA,sBAAsB;IACtB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,WAAW,IAAI;IAC7C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,WAAW,IAAI;IAC7C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,QAAQ;QACR,UAAU;QACV,WAAW,CAAC,QAAU,MAAM,WAAW,IAAI;IAC7C;CACD;AAKM,SAAS,yBACd,WAAwB,EACxB,KAAmB;IAEnB,OAAO,YAAY,SAAS,CAAC;AAC/B;AAKO,SAAS,wBACd,KAAmB,EACnB,iBAA2B;IAE3B,OAAO,aAAa,MAAM,CACxB,CAAC,cACC,CAAC,kBAAkB,QAAQ,CAAC,YAAY,EAAE,KAC1C,yBAAyB,aAAa;AAE5C"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/engine.ts"],"sourcesContent":["import { redis } from '@/lib/redis/client';\nimport { keys } from '@/lib/redis/keys';\nimport { calculatePointsForAction, checkMilestoneReached, getNextMilestone } from './calculator';\nimport { getUnlockedAchievements } from './achievements';\nimport type {\n  RewardAction,\n  PointsAwarded,\n  RewardStatus,\n  PartnerStats,\n  PartnerTier,\n} from './types';\n\n/**\n * Award points to a partner for completing an action\n * This is the main entry point for the rewards system\n */\nexport async function awardPoints(\n  partnerId: string,\n  action: RewardAction\n): Promise<PointsAwarded> {\n  // Calculate points for the action\n  const points = calculatePointsForAction(action);\n\n  // Get current points and achievements\n  const currentPoints = (await redis.get<number>(keys.rewardPoints(partnerId))) ?? 0;\n  const currentAchievements = (await redis.get<string[]>(keys.achievements(partnerId))) ?? [];\n\n  // Calculate new total\n  const newTotal = currentPoints + points;\n\n  // Check if milestone was reached\n  const milestoneReached = checkMilestoneReached(currentPoints, newTotal);\n\n  // Get partner stats to check for achievement unlocks\n  const partnerStats = (await redis.get<PartnerStats>(keys.partnerStats(partnerId))) ?? {\n    dealsWon: 0,\n    trainingsCompleted: 0,\n    copilotSessions: 0,\n    referrals: 0,\n    loginStreak: 0,\n    totalPoints: newTotal,\n  };\n\n  // Update total points in stats\n  partnerStats.totalPoints = newTotal;\n\n  // Check for newly unlocked achievements\n  const newlyUnlocked = getUnlockedAchievements(partnerStats, currentAchievements);\n  const newAchievementIds = newlyUnlocked.map((a) => a.id);\n\n  // Calculate bonus points from achievements\n  const achievementBonusPoints = newlyUnlocked.reduce((sum, a) => sum + a.points, 0);\n  const finalTotal = newTotal + achievementBonusPoints;\n\n  // Update Redis\n  await Promise.all([\n    // Update points\n    redis.set(keys.rewardPoints(partnerId), finalTotal),\n    // Update achievements\n    redis.set(keys.achievements(partnerId), [...currentAchievements, ...newAchievementIds]),\n    // Update leaderboard (sorted set by points)\n    redis.zadd(keys.rewardsLeaderboard(), { score: finalTotal, member: partnerId }),\n    // Store reward event\n    redis.set(\n      `${keys.rewardEvents(partnerId)}:${Date.now()}`,\n      {\n        action,\n        points,\n        timestamp: new Date().toISOString(),\n        milestoneReached,\n        achievementsUnlocked: newAchievementIds,\n      }\n    ),\n  ]);\n\n  return {\n    partnerId,\n    action,\n    points,\n    newTotal: finalTotal,\n    milestoneReached: milestoneReached ?? undefined,\n    achievementsUnlocked: newAchievementIds,\n    timestamp: new Date().toISOString(),\n  };\n}\n\n/**\n * Get the complete reward status for a partner\n */\nexport async function getRewardStatus(partnerId: string): Promise<RewardStatus> {\n  // Get data from Redis in parallel\n  const [totalPoints, achievements, leaderboardRank] = await Promise.all([\n    redis.get<number>(keys.rewardPoints(partnerId)),\n    redis.get<string[]>(keys.achievements(partnerId)),\n    redis.zrevrank(keys.rewardsLeaderboard(), partnerId),\n  ]);\n\n  const points = totalPoints ?? 0;\n  const unlockedAchievements = achievements ?? [];\n\n  // Calculate tier based on points\n  const tier = calculateTier(points);\n\n  // Calculate next milestone\n  const { milestone: nextMilestone, pointsNeeded } = getNextMilestone(points);\n\n  // Leaderboard position (zrevrank returns 0-indexed position, we want 1-indexed)\n  const leaderboardPosition = leaderboardRank !== null ? leaderboardRank + 1 : null;\n\n  return {\n    partnerId,\n    totalPoints: points,\n    tier,\n    achievements: unlockedAchievements,\n    nextMilestone,\n    pointsToNextMilestone: pointsNeeded,\n    leaderboardPosition,\n  };\n}\n\n/**\n * Calculate partner tier based on total points\n */\nfunction calculateTier(points: number): PartnerTier {\n  if (points >= 10000) return 'platinum';\n  if (points >= 5000) return 'gold';\n  if (points >= 1000) return 'silver';\n  return 'bronze';\n}\n\n/**\n * Update partner stats (called from various parts of the system)\n */\nexport async function updatePartnerStats(\n  partnerId: string,\n  updates: Partial<PartnerStats>\n): Promise<void> {\n  const currentStats = (await redis.get<PartnerStats>(keys.partnerStats(partnerId))) ?? {\n    dealsWon: 0,\n    trainingsCompleted: 0,\n    copilotSessions: 0,\n    referrals: 0,\n    loginStreak: 0,\n    totalPoints: 0,\n  };\n\n  const updatedStats = { ...currentStats, ...updates };\n  await redis.set(keys.partnerStats(partnerId), updatedStats);\n}\n\n/**\n * Get partner statistics\n */\nexport async function getPartnerStats(partnerId: string): Promise<PartnerStats> {\n  const stats = await redis.get<PartnerStats>(keys.partnerStats(partnerId));\n  return stats ?? {\n    dealsWon: 0,\n    trainingsCompleted: 0,\n    copilotSessions: 0,\n    referrals: 0,\n    loginStreak: 0,\n    totalPoints: 0,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/leaderboard.ts"],"sourcesContent":["import { redis } from '@/lib/redis/client';\nimport { keys } from '@/lib/redis/keys';\n\nexport interface LeaderboardEntry {\n  rank: number;\n  partnerId: string;\n  name: string;\n  points: number;\n}\n\n/**\n * Get the top partners from the leaderboard\n */\nexport async function getLeaderboard(limit: number = 10): Promise<LeaderboardEntry[]> {\n  // Get top partners from sorted set (highest to lowest)\n  const results = await redis.zrange(keys.rewardsLeaderboard(), 0, limit - 1, {\n    rev: true,\n    withScores: true,\n  });\n\n  if (!results || results.length === 0) {\n    return [];\n  }\n\n  // Get partner data in parallel\n  const partnerIds = results.map((r) => r.value);\n  const partnerData = await Promise.all(\n    partnerIds.map((id) => redis.get<{ name?: string }>(keys.partner(id)))\n  );\n\n  // Build leaderboard entries\n  return results.map((result, index) => ({\n    rank: index + 1,\n    partnerId: result.value,\n    name: partnerData[index]?.name ?? result.value, // Fallback to ID if name not found\n    points: result.score,\n  }));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAYO,eAAe,eAAe,QAAgB,EAAE;IACrD,uDAAuD;IACvD,MAAM,UAAU,MAAM,2KAAK,CAAC,MAAM,CAAC,wKAAI,CAAC,kBAAkB,IAAI,GAAG,QAAQ,GAAG;QAC1E,KAAK;QACL,YAAY;IACd;IAEA,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG;QACpC,OAAO,EAAE;IACX;IAEA,+BAA+B;IAC/B,MAAM,aAAa,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK;IAC7C,MAAM,cAAc,MAAM,QAAQ,GAAG,CACnC,WAAW,GAAG,CAAC,CAAC,KAAO,2KAAK,CAAC,GAAG,CAAoB,wKAAI,CAAC,OAAO,CAAC;IAGnE,4BAA4B;IAC5B,OAAO,QAAQ,GAAG,CAAC,CAAC,QAAQ,QAAU,CAAC;YACrC,MAAM,QAAQ;YACd,WAAW,OAAO,KAAK;YACvB,MAAM,WAAW,CAAC,MAAM,EAAE,QAAQ,OAAO,KAAK;YAC9C,QAAQ,OAAO,KAAK;QACtB,CAAC;AACH"}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/lib/rewards/index.ts"],"sourcesContent":["/**\n * Rewards System - Main Entry Point\n *\n * This barrel export provides a clean interface to the rewards system.\n * Use this as the main import point for all reward-related functionality.\n *\n * Example:\n * ```\n * import { awardPoints, getRewardStatus, getLeaderboard } from '@/lib/rewards';\n * ```\n */\n\n// Core Engine Functions\nexport {\n  awardPoints,\n  getRewardStatus,\n  updatePartnerStats,\n  getPartnerStats,\n} from './engine';\n\n// Calculator Functions\nexport {\n  calculatePointsForAction,\n  checkMilestoneReached,\n  getNextMilestone,\n} from './calculator';\n\n// Achievement Functions\nexport {\n  getUnlockedAchievements,\n  getAchievementById,\n  getAllAchievements,\n} from './achievements';\n\n// Leaderboard Functions\nexport { getLeaderboard } from './leaderboard';\n\n// Type Exports\nexport type {\n  RewardAction,\n  PartnerTier,\n  Milestone,\n  Achievement,\n  PartnerStats,\n  PointsAwarded,\n  RewardStatus,\n  LeaderboardEntry,\n} from './types';\n\nexport type { LeaderboardEntry as LeaderboardEntryType } from './leaderboard';\n"],"names":[],"mappings":";AAAA;;;;;;;;;;CAUC,GAED,wBAAwB;AACxB;AAOA,uBAAuB;AACvB;AAMA,wBAAwB;AACxB;AAMA,wBAAwB;AACxB"}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///Users/lucasjolias/code/playground/apps/web/partners-portal/src/app/%5Blocale%5D/partners/portal/page.tsx"],"sourcesContent":["import { getTranslations } from 'next-intl/server';\nimport { getCurrentSession } from '@/lib/auth';\nimport { getPartnerDeals, getUserCertifications, getPartnerCommissions } from '@/lib/redis';\nimport { StatsCard } from '@/components/portal/dashboard/StatsCard';\nimport { TierDisplay } from '@/components/portal/dashboard/TierDisplay';\nimport { RatingFactorsCard } from '@/components/portal/dashboard/RatingFactorsCard';\nimport { AlertsList } from '@/components/portal/dashboard/AlertsList';\nimport { RecentDeals } from '@/components/portal/dashboard/RecentDeals';\nimport { formatCurrency } from '@/lib/utils';\nimport { Trophy, Award, DollarSign } from 'lucide-react';\nimport { RewardsCard } from '@/components/portal/rewards/RewardsCard';\nimport { AchievementsPanel } from '@/components/portal/rewards/AchievementsPanel';\nimport { LeaderboardCard } from '@/components/portal/rewards/LeaderboardCard';\nimport { getRewardStatus, getLeaderboard } from '@/lib/rewards';\n\ninterface DashboardPageProps {\n  params: Promise<{ locale: string }>;\n}\n\nexport default async function DashboardPage({ params }: DashboardPageProps) {\n  const { locale } = await params;\n  const t = await getTranslations('dashboard');\n  const tDeals = await getTranslations('deals');\n  const session = await getCurrentSession();\n\n  if (!session) {\n    return null;\n  }\n\n  const { user, partner } = session;\n\n  const [deals, certifications, commissionsData, rewardStatus, leaderboard] = await Promise.all([\n    getPartnerDeals(partner.id),\n    getUserCertifications(user.id),\n    getPartnerCommissions(partner.id),\n    getRewardStatus(partner.id),\n    getLeaderboard(10),\n  ]);\n\n  const pendingDeals = deals.filter(\n    (d) => d.status === 'pending_approval' || d.status === 'more_info'\n  );\n  const approvedDeals = deals.filter((d) => d.status === 'approved');\n  const wonDeals = deals.filter((d) => d.status === 'closed_won');\n  const activeCerts = certifications.filter(\n    (c) => c.status === 'active' && new Date(c.expiresAt) > new Date()\n  );\n  const pendingCommissions = commissionsData.filter((c) => c.status === 'pending');\n  const pendingAmount = pendingCommissions.reduce((sum, c) => sum + c.amount, 0);\n\n  // Generate alerts\n  const alerts: { id: string; type: 'warning' | 'info' | 'error'; title: string; message: string }[] = [];\n\n  // Check for expiring certifications\n  activeCerts.forEach((cert) => {\n    const daysUntilExpiry = Math.ceil(\n      (new Date(cert.expiresAt).getTime() - Date.now()) / (1000 * 60 * 60 * 24)\n    );\n    if (daysUntilExpiry <= 30 && daysUntilExpiry > 0) {\n      alerts.push({\n        id: `cert-${cert.id}`,\n        type: 'warning',\n        title: 'Certification Expiring',\n        message: t('alerts.certExpiring', { days: daysUntilExpiry }),\n      });\n    }\n  });\n\n  // Check for pending approvals\n  if (pendingDeals.length > 0) {\n    alerts.push({\n      id: 'pending-deals',\n      type: 'info',\n      title: 'Oportunidades Pendientes',\n      message: `Tienes ${pendingDeals.length} oportunidad(es) pendientes de aprobacion`,\n    });\n  }\n\n  return (\n    <div className=\"space-y-6 lg:space-y-8\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-xl sm:text-2xl font-bold text-[var(--color-text-primary)]\">{t('title')}</h1>\n        <p className=\"text-sm sm:text-base text-[var(--color-text-secondary)]\">{t('welcome', { name: user.name })}</p>\n      </div>\n\n      {/* Alerts */}\n      {alerts.length > 0 && (\n        <AlertsList alerts={alerts} />\n      )}\n\n      {/* Stats Grid */}\n      <div className=\"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4\">\n        <StatsCard\n          title={t('stats.totalDeals')}\n          value={deals.length}\n          iconName=\"briefcase\"\n          color=\"primary\"\n        />\n        <StatsCard\n          title=\"Pendientes\"\n          value={pendingDeals.length}\n          iconName=\"clock\"\n          color=\"orange\"\n        />\n        <StatsCard\n          title=\"Aprobadas\"\n          value={approvedDeals.length}\n          iconName=\"check-circle\"\n          color=\"green\"\n        />\n        <StatsCard\n          title={t('stats.wonDeals')}\n          value={wonDeals.length}\n          iconName=\"trophy\"\n          color=\"purple\"\n        />\n      </div>\n\n      {/* Second Row */}\n      <div className=\"grid gap-3 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n        <div className=\"rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-4 sm:p-6\">\n          <div className=\"flex items-center gap-2 mb-3 sm:mb-4\">\n            <Trophy className=\"h-4 w-4 sm:h-5 sm:w-5 text-[var(--color-accent-orange)]\" />\n            <h3 className=\"text-sm sm:text-base font-semibold text-[var(--color-text-primary)]\">{t('stats.tier')}</h3>\n          </div>\n          <TierDisplay tier={partner.tier} size=\"lg\" />\n          <RatingFactorsCard className=\"mt-4 pt-4 border-t border-[var(--color-border)]\" />\n        </div>\n\n        <div className=\"rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-4 sm:p-6\">\n          <div className=\"flex items-center gap-2 mb-3 sm:mb-4\">\n            <Award className=\"h-4 w-4 sm:h-5 sm:w-5 text-[var(--color-primary)]\" />\n            <h3 className=\"text-sm sm:text-base font-semibold text-[var(--color-text-primary)]\">{t('stats.certifications')}</h3>\n          </div>\n          <div className=\"text-2xl sm:text-3xl font-bold text-[var(--color-text-primary)]\">{activeCerts.length}</div>\n          <p className=\"text-xs sm:text-sm text-[var(--color-text-secondary)]\">Certificaciones activas</p>\n        </div>\n\n        <div className=\"rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-4 sm:p-6 sm:col-span-2 lg:col-span-1\">\n          <div className=\"flex items-center gap-2 mb-3 sm:mb-4\">\n            <DollarSign className=\"h-4 w-4 sm:h-5 sm:w-5 text-[var(--color-accent-green)]\" />\n            <h3 className=\"text-sm sm:text-base font-semibold text-[var(--color-text-primary)]\">{t('stats.pendingCommissions')}</h3>\n          </div>\n          <div className=\"text-2xl sm:text-3xl font-bold text-[var(--color-text-primary)]\">\n            {formatCurrency(pendingAmount)}\n          </div>\n          <p className=\"text-xs sm:text-sm text-[var(--color-text-secondary)]\">{pendingCommissions.length} pendientes</p>\n        </div>\n      </div>\n\n      {/* Rewards Section */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n        <div className=\"lg:col-span-2\">\n          <RewardsCard status={rewardStatus} />\n        </div>\n        <div>\n          <LeaderboardCard\n            entries={leaderboard}\n            currentPartnerId={partner.id}\n          />\n        </div>\n      </div>\n\n      {/* Achievements Section */}\n      <div className=\"mb-8\">\n        <AchievementsPanel\n          unlockedAchievementIds={rewardStatus.achievements}\n        />\n      </div>\n\n      {/* Recent Deals */}\n      <div>\n        <h2 className=\"mb-3 sm:mb-4 text-base sm:text-lg font-semibold text-[var(--color-text-primary)]\">{t('recentDeals')}</h2>\n        <RecentDeals\n          deals={deals}\n          locale={locale}\n          viewAllLabel=\"Ver todas las oportunidades\"\n          emptyLabel={tDeals('list.empty')}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}