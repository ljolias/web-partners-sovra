(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44449,e=>{"use strict";var r=e.i(98134),a=e.i(78033);let t=["M801.88,842.78c-8.1,47.41-30.86,89.85-63.42,122.39-41.2,41.2-98.19,66.73-161.09,66.73-125.41,0-227.2-101.41-227.74-226.71v-271.76h146.2v277.65c0,45.09,36.52,81.62,81.54,81.62,22.56,0,42.97-9.12,57.73-23.89,7.41-7.41,13.38-16.22,17.52-26.01h149.27Z","M805.17,349.63v271.82h-146.18v-277.65c0-45.09-36.52-81.62-81.62-81.62-22.54,0-42.89,9.12-57.67,23.89-7.39,7.39-13.35,16.18-17.46,25.96h-149.32c8.08-47.39,30.83-89.77,63.44-122.39,41.18-41.2,98.12-66.73,161.01-66.73,125.49,0,227.2,101.41,227.8,226.71Z","M1031.89,577.44c0,125.41-101.35,227.12-226.73,227.74h-271.75v-146.15h277.65c45.02,0,81.62-36.52,81.62-81.6,0-22.56-9.12-42.97-23.95-57.73-7.41-7.41-16.2-13.38-25.98-17.5v-149.3c47.44,8.1,89.83,30.86,122.4,63.44,41.26,41.26,66.73,98.19,66.73,161.09Z","M621.39,349.63v146.2h-277.67c-45.02,0-81.6,36.52-81.6,81.62,0,22.54,9.17,42.95,23.95,57.73,7.39,7.39,16.18,13.37,25.96,17.48v149.25c-47.41-8.08-89.85-30.83-122.4-63.44-41.2-41.2-66.71-98.14-66.71-161.01,0-125.43,101.41-227.27,226.71-227.82h271.76Z"],o={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"};function l({size:e="md",className:l="",animate:s=!0}){let i=o[e];return s?(0,r.jsx)(a.motion.svg,{className:`${i} ${l}`,viewBox:"0 0 1154.81 1154.81",fill:"none",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:t.map((e,t)=>(0,r.jsx)(a.motion.path,{d:e,fill:"currentColor",initial:{opacity:.2},animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,ease:"easeInOut",delay:.3*t}},t))}):(0,r.jsx)("svg",{className:`${i} ${l}`,viewBox:"0 0 1154.81 1154.81",fill:"none",children:t.map((e,a)=>(0,r.jsx)("path",{d:e,fill:"currentColor"},a))})}e.s(["SovraLoader",()=>l,"default",0,l])},64833,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(78033),o=e.i(13879),l=e.i(44449);let s=(0,a.forwardRef)(({className:e,variant:a="primary",size:s="md",isLoading:i,disabled:c,children:d,...n},x)=>(0,r.jsx)(t.motion.button,{ref:x,whileTap:{scale:.98},className:(0,o.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-[var(--color-primary)] !text-white hover:opacity-90 focus:ring-[var(--color-primary)]",secondary:"bg-[var(--color-surface-hover)] text-[var(--color-text-primary)] hover:bg-[var(--color-border-hover)] focus:ring-[var(--color-primary)]",outline:"border border-[var(--color-border)] bg-transparent text-[var(--color-text-primary)] hover:bg-[var(--color-surface-hover)] hover:border-[var(--color-border-hover)] focus:ring-[var(--color-primary)]",ghost:"bg-transparent text-[var(--color-text-primary)] hover:bg-[var(--color-surface-hover)] focus:ring-[var(--color-primary)]",danger:"bg-red-600 !text-white hover:bg-red-700 focus:ring-red-500"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s],e),disabled:c||i,...n,children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.SovraLoader,{size:"sm",className:"mr-2 !w-4 !h-4"}),"Loading..."]}):d}));s.displayName="Button",e.s(["Button",()=>s])},96215,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(13879);let o=(0,a.forwardRef)(({className:e,hover:a=!1,children:o,...l},s)=>(0,r.jsx)("div",{ref:s,className:(0,t.cn)("rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 shadow-sm",a&&"cursor-pointer transition-all hover:-translate-y-0.5 hover:shadow-md hover:border-[var(--color-border-hover)]",e),...l,children:o}));o.displayName="Card";let l=(0,a.forwardRef)(({className:e,...a},o)=>(0,r.jsx)("div",{ref:o,className:(0,t.cn)("mb-4",e),...a}));l.displayName="CardHeader";let s=(0,a.forwardRef)(({className:e,...a},o)=>(0,r.jsx)("h3",{ref:o,className:(0,t.cn)("text-lg font-semibold text-[var(--color-text-primary)]",e),...a}));s.displayName="CardTitle";let i=(0,a.forwardRef)(({className:e,...a},o)=>(0,r.jsx)("p",{ref:o,className:(0,t.cn)("text-sm text-[var(--color-text-secondary)]",e),...a}));i.displayName="CardDescription";let c=(0,a.forwardRef)(({className:e,...a},o)=>(0,r.jsx)("div",{ref:o,className:(0,t.cn)("",e),...a}));c.displayName="CardContent";let d=(0,a.forwardRef)(({className:e,...a},o)=>(0,r.jsx)("div",{ref:o,className:(0,t.cn)("mt-4 flex items-center gap-2",e),...a}));d.displayName="CardFooter",e.s(["Card",()=>o,"CardContent",()=>c,"CardDescription",()=>i,"CardFooter",()=>d,"CardHeader",()=>l,"CardTitle",()=>s])},75539,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(13879);let o=(0,a.forwardRef)(({className:e,label:a,error:o,hint:l,type:s="text",id:i,...c},d)=>{let n=i||a?.toLowerCase().replace(/\s+/g,"-");return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{htmlFor:n,className:"mb-1.5 block text-sm font-medium text-gray-700",children:a}),(0,r.jsx)("input",{type:s,id:n,ref:d,className:(0,t.cn)("w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm text-gray-900 placeholder-gray-400","transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",o&&"border-red-500 focus:border-red-500 focus:ring-red-500/20",e),...c}),l&&!o&&(0,r.jsx)("p",{className:"mt-1.5 text-sm text-gray-500",children:l}),o&&(0,r.jsx)("p",{className:"mt-1.5 text-sm text-red-600",children:o})]})});o.displayName="Input",e.s(["Input",()=>o])},80859,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(13879);let o=(0,a.forwardRef)(({className:e,label:a,error:o,options:l,id:s,...i},c)=>{let d=s||a?.toLowerCase().replace(/\s+/g,"-");return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{htmlFor:d,className:"mb-1.5 block text-sm font-medium text-gray-700",children:a}),(0,r.jsx)("select",{id:d,ref:c,className:(0,t.cn)("w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-900","transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",o&&"border-red-500 focus:border-red-500 focus:ring-red-500/20",e),...i,children:l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),o&&(0,r.jsx)("p",{className:"mt-1.5 text-sm text-red-600",children:o})]})});o.displayName="Select",e.s(["Select",()=>o])},27897,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(13879);let o=(0,a.forwardRef)(({className:e,label:a,error:o,id:l,...s},i)=>{let c=l||a?.toLowerCase().replace(/\s+/g,"-");return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{htmlFor:c,className:"mb-1.5 block text-sm font-medium text-gray-700",children:a}),(0,r.jsx)("textarea",{id:c,ref:i,className:(0,t.cn)("w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm text-gray-900 placeholder-gray-400","transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500","min-h-[100px] resize-y",o&&"border-red-500 focus:border-red-500 focus:ring-red-500/20",e),...s}),o&&(0,r.jsx)("p",{className:"mt-1.5 text-sm text-red-600",children:o})]})});o.displayName="Textarea",e.s(["Textarea",()=>o])},97422,e=>{"use strict";var r=e.i(98134),a=e.i(13879);function t({className:e,variant:t="default",...o}){return(0,r.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--color-surface-hover)] text-[var(--color-text-secondary)]",success:"bg-green-500/10 text-green-500",warning:"bg-amber-500/10 text-amber-500",danger:"bg-red-500/10 text-red-500",info:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]",secondary:"bg-[var(--color-surface-hover)] text-[var(--color-text-secondary)]",outline:"bg-transparent border border-[var(--color-border)] text-[var(--color-text-secondary)]",destructive:"bg-red-500/10 text-red-500",primary:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}[t],e),...o})}e.s(["Badge",()=>t])},12741,e=>{"use strict";var r=e.i(98134),a=e.i(78033),t=e.i(13879);function o({className:e,value:o,max:l=100,showLabel:s=!1,variant:i="default",...c}){let d=Math.min(Math.max(o/l*100,0),100);return(0,r.jsxs)("div",{className:(0,t.cn)("w-full",e),...c,children:[s&&(0,r.jsxs)("div",{className:"mb-1 flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:[Math.round(d),"%"]})]}),(0,r.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-gray-200",children:(0,r.jsx)(a.motion.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:.5,ease:"easeOut"},className:(0,t.cn)("h-full rounded-full",{default:"bg-indigo-600",success:"bg-green-500",warning:"bg-yellow-500",danger:"bg-red-500"}[i])})})]})}e.s(["Progress",()=>o])},39786,8200,6361,e=>{"use strict";var r=e.i(67784);let a=(0,r.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],39786);let t=(0,r.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],8200);let o=(0,r.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>o],6361)},41534,e=>{"use strict";let r=(0,e.i(67784).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>r],41534)},29854,e=>{"use strict";var r=e.i(98134),a=e.i(39786),t=e.i(8200),o=e.i(6361),l=e.i(41534),s=e.i(13879);function i({className:e,variant:i="info",title:c,children:d,...n}){let x={info:o.Info,success:t.CheckCircle2,warning:a.AlertCircle,error:l.XCircle}[i],u={info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-500",title:"text-blue-800",content:"text-blue-700"},success:{container:"bg-green-50 border-green-200",icon:"text-green-500",title:"text-green-800",content:"text-green-700"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-500",title:"text-yellow-800",content:"text-yellow-700"},error:{container:"bg-red-50 border-red-200",icon:"text-red-500",title:"text-red-800",content:"text-red-700"}}[i];return(0,r.jsxs)("div",{className:(0,s.cn)("flex gap-3 rounded-lg border p-4",u.container,e),role:"alert",...n,children:[(0,r.jsx)(x,{className:(0,s.cn)("h-5 w-5 flex-shrink-0",u.icon)}),(0,r.jsxs)("div",{children:[c&&(0,r.jsx)("h4",{className:(0,s.cn)("font-medium",u.title),children:c}),(0,r.jsx)("div",{className:(0,s.cn)("text-sm",u.content,c&&"mt-1"),children:d})]})]})}e.s(["Alert",()=>i])},75315,e=>{"use strict";e.i(64833),e.i(96215),e.i(75539),e.i(80859),e.i(27897),e.i(97422),e.i(12741),e.i(29854),e.i(44449),e.s([])},78516,e=>{"use strict";let r=(0,e.i(67784).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>r],78516)},84710,e=>{"use strict";let r=(0,e.i(67784).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>r],84710)},64561,e=>{"use strict";let r=(0,e.i(67784).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>r],64561)},72056,e=>{"use strict";let r=(0,e.i(67784).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>r],72056)},11322,e=>{"use strict";let r=(0,e.i(67784).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>r],11322)},64430,e=>{"use strict";let r=(0,e.i(67784).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],64430)},22010,e=>{"use strict";var r=e.i(98134),a=e.i(75201),t=e.i(24601),o=e.i(84710),l=e.i(16286),s=e.i(38657),i=e.i(64561),c=e.i(16815),d=e.i(72056),n=e.i(75879),x=e.i(56647),u=e.i(78516),m=e.i(64430),g=e.i(11322),h=e.i(13879);e.i(75315);var v=e.i(44449);let b={partner:s.Building2,credential:i.ShieldCheck,document:c.FileText,deal:d.Trophy,course:n.GraduationCap,pricing:x.DollarSign},p={"partner.created":{label:"Partner creado",color:"text-green-600 bg-green-100"},"partner.updated":{label:"Partner actualizado",color:"text-blue-600 bg-blue-100"},"partner.suspended":{label:"Partner suspendido",color:"text-red-600 bg-red-100"},"partner.reactivated":{label:"Partner reactivado",color:"text-green-600 bg-green-100"},"partner.tier_changed":{label:"Nivel cambiado",color:"text-purple-600 bg-purple-100"},"credential.issued":{label:"Credencial emitida",color:"text-green-600 bg-green-100"},"credential.revoked":{label:"Credencial revocada",color:"text-red-600 bg-red-100"},"deal.approved":{label:"Deal aprobado",color:"text-green-600 bg-green-100"},"deal.rejected":{label:"Deal rechazado",color:"text-red-600 bg-red-100"},"deal.info_requested":{label:"Info solicitada",color:"text-amber-600 bg-amber-100"},"document.shared":{label:"Doc compartido",color:"text-blue-600 bg-blue-100"},"document.verified":{label:"Doc verificado",color:"text-green-600 bg-green-100"},"pricing.updated":{label:"Precios actualizados",color:"text-indigo-600 bg-indigo-100"},"course.created":{label:"Curso creado",color:"text-green-600 bg-green-100"},"course.updated":{label:"Curso actualizado",color:"text-blue-600 bg-blue-100"},"course.published":{label:"Curso publicado",color:"text-green-600 bg-green-100"}},f=[{value:"",label:"Todas las entidades"},{value:"partner",label:"Partners"},{value:"credential",label:"Credenciales"},{value:"deal",label:"Deals"},{value:"document",label:"Documentos"},{value:"course",label:"Cursos"},{value:"pricing",label:"Precios"}],y=[{value:"",label:"Todas las acciones"},{value:"partner.created",label:"Partner creado"},{value:"partner.updated",label:"Partner actualizado"},{value:"partner.suspended",label:"Partner suspendido"},{value:"partner.reactivated",label:"Partner reactivado"},{value:"credential.issued",label:"Credencial emitida"},{value:"credential.revoked",label:"Credencial revocada"},{value:"deal.approved",label:"Deal aprobado"},{value:"deal.rejected",label:"Deal rechazado"},{value:"course.created",label:"Curso creado"},{value:"course.published",label:"Curso publicado"}];function j(){let e;(0,t.useRouter)();let s=(0,t.useParams)(),i=(0,t.useSearchParams)();s.locale;let[c,d]=(0,a.useState)([]),[n,x]=(0,a.useState)(!0),[j,N]=(0,a.useState)(i.get("entity")||""),[w,C]=(0,a.useState)(i.get("action")||""),[k,S]=(0,a.useState)(""),[M,T]=(0,a.useState)(""),[D,L]=(0,a.useState)(0),[P,R]=(0,a.useState)(!0),z=(0,a.useCallback)(async()=>{x(!0);try{let e=new URLSearchParams;e.set("limit","50"),e.set("offset",(50*D).toString()),j&&e.set("entityType",j),w&&e.set("action",w),k&&e.set("from",k),M&&e.set("to",M);let r=await fetch(`/api/sovra/audit?${e.toString()}`);if(!r.ok)throw Error("Failed to fetch logs");let a=await r.json();d(a.logs||[]),R(50===(a.logs||[]).length)}catch(e){console.error("Error fetching logs:",e)}finally{x(!1)}},[j,w,k,M,D]);(0,a.useEffect)(()=>{z()},[z]);let A=async()=>{try{let e=new URLSearchParams;j&&e.set("entityType",j),w&&e.set("action",w),k&&e.set("from",k),M&&e.set("to",M);let r=await fetch(`/api/sovra/audit/export?${e.toString()}`);if(!r.ok)throw Error("Failed to export");let a=await r.blob(),t=window.URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download=`audit-log-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(t)}catch(e){console.error("Error exporting:",e)}},E=(e=new Map,c.forEach(r=>{let a,t=new Date(r.timestamp),o=Math.floor((new Date().getTime()-t.getTime())/864e5);a=0===o?"Hoy":1===o?"Ayer":o<7?"Esta semana":o<30?"Este mes":t.toLocaleDateString("es-ES",{month:"long",year:"numeric"}),e.has(a)||e.set(a,[]),e.get(a).push(r)}),e);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)] flex items-center gap-2",children:[(0,r.jsx)(l.Activity,{className:"w-6 h-6"}),"Audit Log"]}),(0,r.jsx)("p",{className:"text-[var(--color-text-secondary)]",children:"Historial de todas las acciones en el sistema"})]}),(0,r.jsxs)("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 text-[var(--color-text-primary)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-lg hover:bg-[var(--color-surface-hover)] transition-colors",children:[(0,r.jsx)(o.Download,{className:"w-5 h-5"}),"Exportar CSV"]})]}),(0,r.jsx)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-4",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)("select",{value:j,onChange:e=>{N(e.target.value),L(0)},className:"px-3 py-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-bg)] text-[var(--color-text-primary)] focus:ring-2 focus:ring-[var(--color-primary)] text-sm",children:f.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)("select",{value:w,onChange:e=>{C(e.target.value),L(0)},className:"px-3 py-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-bg)] text-[var(--color-text-primary)] focus:ring-2 focus:ring-[var(--color-primary)] text-sm",children:y.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--color-text-secondary)]"}),(0,r.jsx)("input",{type:"date",value:k,onChange:e=>{S(e.target.value),L(0)},className:"w-full pl-10 pr-3 py-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-bg)] text-[var(--color-text-primary)] focus:ring-2 focus:ring-[var(--color-primary)] text-sm",placeholder:"Desde"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--color-text-secondary)]"}),(0,r.jsx)("input",{type:"date",value:M,onChange:e=>{T(e.target.value),L(0)},className:"w-full pl-10 pr-3 py-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-bg)] text-[var(--color-text-primary)] focus:ring-2 focus:ring-[var(--color-primary)] text-sm",placeholder:"Hasta"})]})]}),(j||w||k||M)&&(0,r.jsx)("button",{onClick:()=>{N(""),C(""),S(""),T(""),L(0)},className:"px-4 py-2 text-sm text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]",children:"Limpiar filtros"})]})}),n?(0,r.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-12 text-center",children:[(0,r.jsx)(v.SovraLoader,{size:"md",className:"text-[var(--color-primary)] mx-auto"}),(0,r.jsx)("p",{className:"text-[var(--color-text-secondary)] mt-4",children:"Cargando logs..."})]}):0===c.length?(0,r.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-12 text-center",children:[(0,r.jsx)(l.Activity,{className:"w-12 h-12 text-[var(--color-text-muted)] mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-[var(--color-text-secondary)]",children:"No hay logs que mostrar"})]}):(0,r.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] overflow-hidden",children:[Array.from(E.entries()).map(([e,a])=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"px-6 py-3 bg-[var(--color-surface-hover)] border-b border-[var(--color-border)]",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-[var(--color-text-secondary)]",children:e})}),(0,r.jsx)("div",{className:"divide-y divide-[var(--color-border)]",children:a.map(e=>{let a,t,o=b[e.entityType]||l.Activity,s=p[e.action]||{label:e.action,color:"text-[var(--color-text-secondary)] bg-[var(--color-surface-hover)]"};return(0,r.jsx)("div",{className:"px-6 py-4 hover:bg-[var(--color-surface-hover)] transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[var(--color-surface-hover)] flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(o,{className:"w-5 h-5 text-[var(--color-text-secondary)]"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:e.actorName}),(0,r.jsx)("span",{className:(0,h.cn)("px-2 py-0.5 text-xs font-medium rounded-full",s.color),children:s.label}),e.entityName&&(0,r.jsx)("span",{className:"text-[var(--color-text-secondary)]",children:e.entityName})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-[var(--color-text-secondary)]",children:[(0,r.jsx)("span",{children:(a=new Date(e.timestamp),0===(t=Math.floor((new Date().getTime()-a.getTime())/864e5))?`Hoy, ${a.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`:1===t?`Ayer, ${a.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`:t<7?a.toLocaleDateString("es-ES",{weekday:"long",hour:"2-digit",minute:"2-digit"}):a.toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.ipAddress&&(0,r.jsxs)("span",{children:["IP: ",e.ipAddress]}),(0,r.jsx)("span",{className:"capitalize",children:e.entityType}),(0,r.jsxs)("span",{className:"text-[var(--color-text-muted)]",children:["ID: ",e.entityId.slice(0,8),"..."]})]}),e.changes&&Object.keys(e.changes).length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-xs text-[var(--color-primary)] cursor-pointer hover:underline",children:"Ver cambios"}),(0,r.jsx)("div",{className:"mt-2 p-2 bg-[var(--color-surface-hover)] rounded text-xs font-mono",children:Object.entries(e.changes).map(([e,a])=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("span",{className:"text-[var(--color-text-secondary)]",children:[e,":"]}),(0,r.jsx)("span",{className:"text-red-600 line-through",children:String(a.old)}),(0,r.jsx)("span",{className:"text-green-600",children:String(a.new)})]},e))})]})]})]})},e.id)})})]},e)),(0,r.jsxs)("div",{className:"px-6 py-4 bg-[var(--color-surface-hover)] border-t border-[var(--color-border)] flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:["Mostrando ",50*D+1," - ",50*D+c.length," registros"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>L(e=>Math.max(0,e-1)),disabled:0===D,className:"p-2 rounded-lg border border-[var(--color-border)] hover:bg-[var(--color-surface)] disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(m.ChevronLeft,{className:"w-4 h-4"})}),(0,r.jsxs)("span",{className:"text-sm text-[var(--color-text-secondary)]",children:["Pagina ",D+1]}),(0,r.jsx)("button",{onClick:()=>L(e=>e+1),disabled:!P,className:"p-2 rounded-lg border border-[var(--color-border)] hover:bg-[var(--color-surface)] disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(g.ChevronRight,{className:"w-4 h-4"})})]})]})]})]})}e.s(["default",()=>j])}]);