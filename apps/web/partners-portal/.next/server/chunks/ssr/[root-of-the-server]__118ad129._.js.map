{"version":3,"sources":["../../../../../../../apps/web/partners-portal/src/components/sovra/SovraShell.tsx/__nextjs-internal-proxy.mjs","../../../../../../../apps/web/partners-portal/src/app/%5Blocale%5D/sovra/dashboard/layout.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/web/partners-portal/src/components/sovra/SovraShell.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/partners-portal/src/components/sovra/SovraShell.tsx\",\n    \"default\",\n);\n","import { redirect } from 'next/navigation';\nimport { cookies } from 'next/headers';\nimport { getSession, getUser } from '@/lib/redis/operations';\nimport SovraShell from '@/components/sovra/SovraShell';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n  params: Promise<{ locale: string }>;\n}\n\nexport default async function SovraDashboardLayout({ children, params }: LayoutProps) {\n  const { locale } = await params;\n  const cookieStore = await cookies();\n  const sessionId = cookieStore.get('partner_session')?.value;\n\n  if (!sessionId) {\n    redirect(`/${locale}/sovra/login`);\n  }\n\n  const session = await getSession(sessionId);\n  if (!session) {\n    redirect(`/${locale}/sovra/login`);\n  }\n\n  const user = await getUser(session.userId);\n  if (!user) {\n    redirect(`/${locale}/sovra/login`);\n  }\n\n  // In production, check for sovra_admin role\n  // For demo, allow access if role is sovra_admin (via role switcher)\n  if (user.role !== 'sovra_admin') {\n    redirect(`/${locale}/sovra/login`);\n  }\n\n  return (\n    <SovraShell user={user} locale={locale}>\n      {children}\n    </SovraShell>\n  );\n}\n"],"names":[],"mappings":"6IAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,8TAAgU,EAC7V,6FACA,gEAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAU,AAAJ,MAAU,0SAA4S,EACzU,yEACA,+GCLJ,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAOe,eAAe,EAAqB,UAAE,CAAQ,QAAE,CAAM,CAAe,EAClF,GAAM,QAAE,CAAM,CAAE,CAAG,MAAM,EACnB,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAC3B,EAAY,EAAY,GAAG,CAAC,oBAAoB,KAElD,CAAC,GACH,CAAA,EAAA,EAAA,GADc,KACd,AAAQ,EAAC,CAAC,CAAC,EAAE,EAAO,YAAY,CAAC,EAGnC,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAC7B,CAAC,GACH,CAAA,EAAA,EAAA,CADY,OACZ,AAAQ,EAAC,CAAC,CAAC,EAAE,EAAO,YAAY,CAAC,EAGnC,IAAM,EAAO,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,EAAQ,MAAM,EAWzC,OAVI,AAAC,GACH,CAAA,EADS,AACT,EAAA,QAAA,AAAQ,EAAC,CAAC,CAAC,EAAE,EAAO,YAAY,CAAC,EAKjB,eAAe,CAA7B,EAAK,IAAI,EACX,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAC,CAAC,EAAE,EAAO,YAAY,CAAC,EAIjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,KAAM,EAAM,OAAQ,WAC7B,GAGP","ignoreList":[0]}