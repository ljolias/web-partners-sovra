{"version":3,"sources":["../../../../../../../apps/web/partners-portal/src/app/%5Blocale%5D/sovra/dashboard/documents/page.tsx","../../../../../../../apps/web/partners-portal/src/components/sovra/documents/ShareDocumentModal.tsx","../../../../../../../apps/web/partners-portal/src/components/sovra/documents/SendContractModal.tsx","../../../../../../../apps/web/partners-portal/src/components/sovra/documents/AdminDocumentDetail.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Search, Filter, Plus, Send, Upload, Eye, Download, CheckCircle, Clock, AlertTriangle, FileText, Users } from 'lucide-react';\nimport { Button, Badge, Card, CardContent, SovraLoader } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { Partner, LegalDocument, DocumentCategory, DocumentStatus } from '@/types';\n\n// Import modals\nimport { ShareDocumentModal } from '@/components/sovra/documents/ShareDocumentModal';\nimport { SendContractModal } from '@/components/sovra/documents/SendContractModal';\nimport { AdminDocumentDetail } from '@/components/sovra/documents/AdminDocumentDetail';\n\nconst statusConfig: Record<DocumentStatus, { color: string; bgColor: string; label: string }> = {\n  draft: { color: 'text-[var(--color-text-secondary)]', bgColor: 'bg-[var(--color-surface-hover)]', label: 'Borrador' },\n  pending_signature: { color: 'text-amber-500', bgColor: 'bg-amber-500/10', label: 'Pendiente Firma' },\n  partially_signed: { color: 'text-[var(--color-primary)]', bgColor: 'bg-[var(--color-primary)]/10', label: 'Parcialmente Firmado' },\n  active: { color: 'text-green-500', bgColor: 'bg-green-500/10', label: 'Activo' },\n  expired: { color: 'text-red-500', bgColor: 'bg-red-500/10', label: 'Expirado' },\n  superseded: { color: 'text-[var(--color-text-muted)]', bgColor: 'bg-[var(--color-surface-hover)]', label: 'Reemplazado' },\n  archived: { color: 'text-[var(--color-text-muted)]', bgColor: 'bg-[var(--color-surface-hover)]', label: 'Archivado' },\n};\n\nconst categoryLabels: Record<DocumentCategory, string> = {\n  contract: 'Contrato',\n  amendment: 'Addendum',\n  compliance: 'Compliance',\n  financial: 'Financiero',\n  certification: 'Certificacion',\n  policy: 'Politica',\n  correspondence: 'Correspondencia',\n};\n\nexport default function SovraDocumentsPage() {\n  const [partners, setPartners] = useState<Partner[]>([]);\n  const [selectedPartner, setSelectedPartner] = useState<Partner | null>(null);\n  const [documents, setDocuments] = useState<LegalDocument[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<DocumentCategory | 'all'>('all');\n  const [selectedStatus, setSelectedStatus] = useState<DocumentStatus | 'all'>('all');\n\n  // Modals\n  const [isShareModalOpen, setIsShareModalOpen] = useState(false);\n  const [isSendContractModalOpen, setIsSendContractModalOpen] = useState(false);\n  const [selectedDocument, setSelectedDocument] = useState<LegalDocument | null>(null);\n\n  // Fetch partners\n  useEffect(() => {\n    async function fetchPartners() {\n      try {\n        const res = await fetch('/api/sovra/partners');\n        if (res.ok) {\n          const data = await res.json();\n          setPartners(data.partners || []);\n        }\n      } catch (error) {\n        console.error('Failed to fetch partners:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchPartners();\n  }, []);\n\n  // Fetch documents for selected partner\n  const fetchDocuments = useCallback(async () => {\n    if (!selectedPartner) {\n      setDocuments([]);\n      return;\n    }\n\n    try {\n      const res = await fetch(`/api/sovra/documents?partnerId=${selectedPartner.id}`);\n      if (res.ok) {\n        const data = await res.json();\n        setDocuments(data.documents || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch documents:', error);\n    }\n  }, [selectedPartner]);\n\n  useEffect(() => {\n    fetchDocuments();\n  }, [fetchDocuments]);\n\n  // Filter documents\n  const filteredDocuments = documents.filter(doc => {\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      if (!doc.title.toLowerCase().includes(query) && !doc.description?.toLowerCase().includes(query)) {\n        return false;\n      }\n    }\n    if (selectedCategory !== 'all' && doc.category !== selectedCategory) return false;\n    if (selectedStatus !== 'all' && doc.status !== selectedStatus) return false;\n    return true;\n  });\n\n  // Group documents\n  const pendingDocs = filteredDocuments.filter(d =>\n    d.status === 'pending_signature' ||\n    d.status === 'partially_signed' ||\n    (d.type === 'upload' && d.uploadMetadata?.verificationStatus === 'pending')\n  );\n  const activeDocs = filteredDocuments.filter(d =>\n    d.status === 'active' &&\n    !(d.type === 'upload' && d.uploadMetadata?.verificationStatus === 'pending')\n  );\n  const otherDocs = filteredDocuments.filter(d =>\n    !pendingDocs.includes(d) && !activeDocs.includes(d)\n  );\n\n  const handleShareSuccess = () => {\n    setIsShareModalOpen(false);\n    fetchDocuments();\n  };\n\n  const handleSendContractSuccess = () => {\n    setIsSendContractModalOpen(false);\n    fetchDocuments();\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <SovraLoader size=\"md\" className=\"text-[var(--color-primary)]\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-[var(--color-text-primary)]\">\n          Documentos <span className=\"text-[var(--color-primary)]\">Legales</span>\n        </h1>\n        <p className=\"text-[var(--color-text-secondary)]\">Gestiona documentos y contratos de partners</p>\n      </div>\n\n      {/* Partner Selector */}\n      <Card>\n        <CardContent className=\"p-4\">\n          <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-2\">\n            <Users className=\"inline h-4 w-4 mr-2\" />\n            Seleccionar Partner\n          </label>\n          <select\n            value={selectedPartner?.id || ''}\n            onChange={(e) => {\n              const partner = partners.find(p => p.id === e.target.value);\n              setSelectedPartner(partner || null);\n            }}\n            className=\"w-full md:w-96 px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n          >\n            <option value=\"\">-- Selecciona un partner --</option>\n            {partners.map(partner => (\n              <option key={partner.id} value={partner.id}>\n                {partner.companyName} ({partner.name})\n              </option>\n            ))}\n          </select>\n          {selectedPartner && (\n            <div className=\"mt-2 text-xs text-[var(--color-text-secondary)]\">\n              Partner ID: <code className=\"bg-[var(--color-surface-hover)] px-1 py-0.5 rounded\">{selectedPartner.id}</code>\n              {' • '}Tier: <span className=\"capitalize\">{selectedPartner.tier}</span>\n              {' • '}Email: {selectedPartner.email}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {selectedPartner && (\n        <>\n          {/* Actions */}\n          <div className=\"flex flex-wrap gap-3\">\n            <Button onClick={() => setIsSendContractModalOpen(true)}>\n              <Send className=\"h-4 w-4 mr-2\" />\n              Enviar Contrato DocuSign\n            </Button>\n            <Button variant=\"outline\" onClick={() => setIsShareModalOpen(true)}>\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Compartir Documento\n            </Button>\n          </div>\n\n          {/* Filters */}\n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-text-secondary)]\" />\n              <input\n                type=\"text\"\n                placeholder=\"Buscar documentos...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] placeholder:text-[var(--color-text-muted)]\"\n              />\n            </div>\n            <select\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value as DocumentCategory | 'all')}\n              className=\"px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n            >\n              <option value=\"all\">Todas las categorias</option>\n              {Object.entries(categoryLabels).map(([value, label]) => (\n                <option key={value} value={value}>{label}</option>\n              ))}\n            </select>\n            <select\n              value={selectedStatus}\n              onChange={(e) => setSelectedStatus(e.target.value as DocumentStatus | 'all')}\n              className=\"px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n            >\n              <option value=\"all\">Todos los estados</option>\n              {Object.entries(statusConfig).map(([value, config]) => (\n                <option key={value} value={value}>{config.label}</option>\n              ))}\n            </select>\n          </div>\n\n          {/* Documents List */}\n          {filteredDocuments.length === 0 ? (\n            <Card>\n              <CardContent className=\"py-12 text-center\">\n                <FileText className=\"mx-auto h-12 w-12 text-[var(--color-text-muted)]\" />\n                <p className=\"mt-4 text-[var(--color-text-secondary)]\">\n                  {documents.length === 0\n                    ? 'No hay documentos para este partner'\n                    : 'No se encontraron documentos con los filtros aplicados'}\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"space-y-6\">\n              {/* Pending Action */}\n              {pendingDocs.length > 0 && (\n                <div>\n                  <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-3 flex items-center gap-2\">\n                    <span className=\"h-2 w-2 rounded-full bg-amber-500\" />\n                    Requieren Accion ({pendingDocs.length})\n                  </h2>\n                  <div className=\"space-y-2\">\n                    {pendingDocs.map(doc => (\n                      <DocumentRow\n                        key={doc.id}\n                        document={doc}\n                        onView={() => setSelectedDocument(doc)}\n                        onRefresh={fetchDocuments}\n                        formatDate={formatDate}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Active Documents */}\n              {activeDocs.length > 0 && (\n                <div>\n                  <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-3 flex items-center gap-2\">\n                    <span className=\"h-2 w-2 rounded-full bg-green-500\" />\n                    Documentos Activos ({activeDocs.length})\n                  </h2>\n                  <div className=\"space-y-2\">\n                    {activeDocs.map(doc => (\n                      <DocumentRow\n                        key={doc.id}\n                        document={doc}\n                        onView={() => setSelectedDocument(doc)}\n                        onRefresh={fetchDocuments}\n                        formatDate={formatDate}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Other Documents */}\n              {otherDocs.length > 0 && (\n                <div>\n                  <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-3 flex items-center gap-2\">\n                    <span className=\"h-2 w-2 rounded-full bg-[var(--color-text-muted)]\" />\n                    Otros ({otherDocs.length})\n                  </h2>\n                  <div className=\"space-y-2\">\n                    {otherDocs.map(doc => (\n                      <DocumentRow\n                        key={doc.id}\n                        document={doc}\n                        onView={() => setSelectedDocument(doc)}\n                        onRefresh={fetchDocuments}\n                        formatDate={formatDate}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Modals */}\n      {selectedPartner && (\n        <>\n          <ShareDocumentModal\n            isOpen={isShareModalOpen}\n            onClose={() => setIsShareModalOpen(false)}\n            partner={selectedPartner}\n            onSuccess={handleShareSuccess}\n          />\n          <SendContractModal\n            isOpen={isSendContractModalOpen}\n            onClose={() => setIsSendContractModalOpen(false)}\n            partner={selectedPartner}\n            onSuccess={handleSendContractSuccess}\n          />\n        </>\n      )}\n\n      {selectedDocument && (\n        <AdminDocumentDetail\n          document={selectedDocument}\n          isOpen={!!selectedDocument}\n          onClose={() => setSelectedDocument(null)}\n          onRefresh={fetchDocuments}\n        />\n      )}\n    </div>\n  );\n}\n\n// Document Row Component\ninterface DocumentRowProps {\n  document: LegalDocument;\n  onView: () => void;\n  onRefresh: () => void;\n  formatDate: (date: string) => string;\n}\n\nfunction DocumentRow({ document, onView, onRefresh, formatDate }: DocumentRowProps) {\n  const status = statusConfig[document.status];\n  const needsVerification = document.type === 'upload' && document.uploadMetadata?.verificationStatus === 'pending';\n\n  const handleVerify = async (approved: boolean) => {\n    try {\n      const res = await fetch(`/api/sovra/documents/${document.id}/verify`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          status: approved ? 'verified' : 'rejected',\n          notes: approved ? 'Documento verificado por admin' : 'Documento rechazado por admin',\n        }),\n      });\n\n      if (res.ok) {\n        onRefresh();\n      }\n    } catch (error) {\n      console.error('Failed to verify document:', error);\n    }\n  };\n\n  return (\n    <Card className=\"hover:shadow-md transition-shadow\">\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center gap-4\">\n          {/* Icon */}\n          <div className={cn('h-10 w-10 rounded-lg flex items-center justify-center', status.bgColor)}>\n            {document.status === 'active' ? (\n              <CheckCircle className={cn('h-5 w-5', status.color)} />\n            ) : document.status === 'pending_signature' || document.status === 'partially_signed' ? (\n              <Clock className={cn('h-5 w-5', status.color)} />\n            ) : document.status === 'expired' ? (\n              <AlertTriangle className={cn('h-5 w-5', status.color)} />\n            ) : (\n              <FileText className={cn('h-5 w-5', status.color)} />\n            )}\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <h3 className=\"font-medium text-[var(--color-text-primary)] truncate\">{document.title}</h3>\n              {document.version > 1 && (\n                <span className=\"text-xs text-[var(--color-text-secondary)]\">v{document.version}</span>\n              )}\n            </div>\n            <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {categoryLabels[document.category]}\n              </Badge>\n              <Badge\n                variant={document.type === 'docusign' ? 'outline' : 'secondary'}\n                className=\"text-xs\"\n              >\n                {document.type === 'docusign' ? 'DocuSign' : 'Subido'}\n              </Badge>\n              {needsVerification && (\n                <Badge variant=\"warning\" className=\"text-xs\">\n                  Pendiente Verificacion\n                </Badge>\n              )}\n            </div>\n            <p className=\"text-sm text-[var(--color-text-secondary)] mt-1\">\n              {document.createdAt && `Creado: ${formatDate(document.createdAt)}`}\n              {document.expirationDate && ` | Expira: ${formatDate(document.expirationDate)}`}\n            </p>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center gap-2\">\n            {needsVerification && (\n              <>\n                <Button size=\"sm\" onClick={() => handleVerify(true)}>\n                  <CheckCircle className=\"h-4 w-4 mr-1\" />\n                  Verificar\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleVerify(false)}>\n                  Rechazar\n                </Button>\n              </>\n            )}\n            <Button size=\"sm\" variant=\"outline\" onClick={onView}>\n              <Eye className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","'use client';\n\nimport { useState, useRef } from 'react';\nimport { X, Upload, FileText, AlertCircle } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui';\nimport type { Partner, DocumentCategory } from '@/types';\n\ninterface ShareDocumentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  partner: Partner;\n  onSuccess: () => void;\n}\n\nconst categories: Array<{ value: DocumentCategory; label: string; description: string }> = [\n  { value: 'financial', label: 'Financiero', description: 'Reportes de comisiones, facturas, etc.' },\n  { value: 'policy', label: 'Politica', description: 'Manuales, guias de uso, politicas' },\n  { value: 'compliance', label: 'Compliance', description: 'Documentos de cumplimiento' },\n  { value: 'correspondence', label: 'Correspondencia', description: 'Cartas y comunicaciones formales' },\n  { value: 'certification', label: 'Certificacion', description: 'Certificados y acreditaciones' },\n];\n\nconst MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\nconst ALLOWED_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'image/png',\n  'image/jpeg',\n];\n\nexport function ShareDocumentModal({ isOpen, onClose, partner, onSuccess }: ShareDocumentModalProps) {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState<DocumentCategory | ''>('');\n  const [file, setFile] = useState<File | null>(null);\n  const [expirationDate, setExpirationDate] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState('');\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const resetForm = () => {\n    setTitle('');\n    setDescription('');\n    setCategory('');\n    setFile(null);\n    setExpirationDate('');\n    setError('');\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const validateFile = (file: File): string | null => {\n    if (file.size > MAX_FILE_SIZE) {\n      return 'El archivo excede el tamano maximo de 10MB';\n    }\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      return 'Tipo de archivo no permitido. Usa PDF, DOC, DOCX, XLS, XLSX, PNG o JPG';\n    }\n    return null;\n  };\n\n  const handleFileChange = (selectedFile: File | null) => {\n    if (!selectedFile) return;\n\n    const validationError = validateFile(selectedFile);\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setFile(selectedFile);\n    setError('');\n\n    // Auto-fill title if empty\n    if (!title) {\n      const nameWithoutExt = selectedFile.name.replace(/\\.[^/.]+$/, '');\n      setTitle(nameWithoutExt);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const droppedFile = e.dataTransfer.files[0];\n    handleFileChange(droppedFile);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!file || !category || !title) {\n      setError('Por favor completa todos los campos requeridos');\n      return;\n    }\n\n    setIsUploading(true);\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('title', title);\n      formData.append('description', description);\n      formData.append('category', category);\n      formData.append('partnerId', partner.id);\n      if (expirationDate) {\n        formData.append('expirationDate', expirationDate);\n      }\n\n      const res = await fetch('/api/sovra/documents', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n        throw new Error(data.error || 'Error al subir el documento');\n      }\n\n      resetForm();\n      onSuccess();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Error al subir el documento');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n        onClick={handleClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"bg-[var(--color-surface)] rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden border border-[var(--color-border)]\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)]\">Compartir Documento</h2>\n              <p className=\"text-sm text-[var(--color-text-secondary)]\">con {partner.companyName}</p>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"p-2 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-hover)] transition-colors\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"p-4 space-y-4 overflow-y-auto max-h-[calc(90vh-140px)]\">\n            {error && (\n              <div className=\"flex items-center gap-2 p-3 bg-red-500/10 text-red-500 rounded-lg text-sm\">\n                <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\n                {error}\n              </div>\n            )}\n\n            {/* Category */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Categoria *\n              </label>\n              <select\n                value={category}\n                onChange={(e) => setCategory(e.target.value as DocumentCategory)}\n                required\n                className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n              >\n                <option value=\"\">Selecciona una categoria</option>\n                {categories.map((cat) => (\n                  <option key={cat.value} value={cat.value}>\n                    {cat.label} - {cat.description}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Titulo del documento *\n              </label>\n              <input\n                type=\"text\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                required\n                placeholder=\"Ej: Reporte de Comisiones Q4 2025\"\n                className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] placeholder:text-[var(--color-text-muted)]\"\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Descripcion (opcional)\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                rows={2}\n                placeholder=\"Descripcion breve del documento...\"\n                className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] resize-none placeholder:text-[var(--color-text-muted)]\"\n              />\n            </div>\n\n            {/* Expiration Date */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Fecha de vencimiento (opcional)\n              </label>\n              <input\n                type=\"date\"\n                value={expirationDate}\n                onChange={(e) => setExpirationDate(e.target.value)}\n                min={new Date().toISOString().split('T')[0]}\n                className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n              />\n            </div>\n\n            {/* File Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Archivo *\n              </label>\n              <div\n                onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\n                onDragLeave={() => setIsDragging(false)}\n                onDrop={handleDrop}\n                onClick={() => fileInputRef.current?.click()}\n                className={`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${\n                  isDragging\n                    ? 'border-[var(--color-primary)] bg-[var(--color-primary)]/10'\n                    : file\n                    ? 'border-green-500 bg-green-500/10'\n                    : 'border-[var(--color-border)] hover:border-[var(--color-border-hover)]'\n                }`}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={(e) => handleFileChange(e.target.files?.[0] || null)}\n                  accept=\".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg\"\n                  className=\"hidden\"\n                />\n                {file ? (\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <FileText className=\"h-6 w-6 text-green-500\" />\n                    <span className=\"text-sm text-green-500 font-medium\">{file.name}</span>\n                    <button\n                      type=\"button\"\n                      onClick={(e) => { e.stopPropagation(); setFile(null); }}\n                      className=\"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <Upload className=\"mx-auto h-8 w-8 text-[var(--color-text-muted)]\" />\n                    <p className=\"mt-2 text-sm text-[var(--color-text-secondary)]\">\n                      Arrastra un archivo o haz clic para seleccionar\n                    </p>\n                    <p className=\"text-xs text-[var(--color-text-muted)] mt-1\">\n                      PDF, DOC, DOCX, XLS, XLSX, PNG, JPG (max 10MB)\n                    </p>\n                  </>\n                )}\n              </div>\n            </div>\n          </form>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end gap-3 p-4 border-t border-[var(--color-border)]\">\n            <Button variant=\"outline\" onClick={handleClose} disabled={isUploading}>\n              Cancelar\n            </Button>\n            <Button onClick={handleSubmit} disabled={isUploading || !file || !category || !title}>\n              {isUploading ? 'Subiendo...' : 'Compartir Documento'}\n            </Button>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport { useState, useRef } from 'react';\nimport { X, Send, FileText, AlertCircle, Upload, User } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui';\nimport type { Partner } from '@/types';\n\ninterface SendContractModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  partner: Partner;\n  onSuccess: () => void;\n}\n\ntype ContractCategory = 'contract' | 'amendment';\n\nconst contractTypes: Array<{ value: ContractCategory; label: string; description: string }> = [\n  { value: 'contract', label: 'Contrato', description: 'Acuerdos principales, NDA, etc.' },\n  { value: 'amendment', label: 'Addendum', description: 'Modificaciones a contratos existentes' },\n];\n\nconst MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n\nexport function SendContractModal({ isOpen, onClose, partner, onSuccess }: SendContractModalProps) {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState<ContractCategory | ''>('contract');\n  const [file, setFile] = useState<File | null>(null);\n  const [effectiveDate, setEffectiveDate] = useState('');\n  const [expirationDate, setExpirationDate] = useState('');\n\n  // Signers\n  const [partnerSignerName, setPartnerSignerName] = useState(partner.contactName || partner.name || '');\n  const [partnerSignerEmail, setPartnerSignerEmail] = useState(partner.contactEmail || partner.email || '');\n  const [sovraSignerName, setSovraSignerName] = useState('Legal Sovra');\n  const [sovraSignerEmail, setSovraSignerEmail] = useState('legal@sovra.io');\n\n  const [isSending, setIsSending] = useState(false);\n  const [error, setError] = useState('');\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const resetForm = () => {\n    setTitle('');\n    setDescription('');\n    setCategory('contract');\n    setFile(null);\n    setEffectiveDate('');\n    setExpirationDate('');\n    setPartnerSignerName(partner.contactName || partner.name || '');\n    setPartnerSignerEmail(partner.contactEmail || partner.email || '');\n    setSovraSignerName('Legal Sovra');\n    setSovraSignerEmail('legal@sovra.io');\n    setError('');\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const validateFile = (file: File): string | null => {\n    if (file.size > MAX_FILE_SIZE) {\n      return 'El archivo excede el tamano maximo de 10MB';\n    }\n    if (file.type !== 'application/pdf') {\n      return 'Solo se permiten archivos PDF para contratos DocuSign';\n    }\n    return null;\n  };\n\n  const handleFileChange = (selectedFile: File | null) => {\n    if (!selectedFile) return;\n\n    const validationError = validateFile(selectedFile);\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setFile(selectedFile);\n    setError('');\n\n    // Auto-fill title if empty\n    if (!title) {\n      const nameWithoutExt = selectedFile.name.replace(/\\.[^/.]+$/, '');\n      setTitle(nameWithoutExt);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const droppedFile = e.dataTransfer.files[0];\n    handleFileChange(droppedFile);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!file || !category || !title || !partnerSignerEmail || !sovraSignerEmail) {\n      setError('Por favor completa todos los campos requeridos');\n      return;\n    }\n\n    // Validate emails\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(partnerSignerEmail) || !emailRegex.test(sovraSignerEmail)) {\n      setError('Por favor ingresa emails validos');\n      return;\n    }\n\n    setIsSending(true);\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('title', title);\n      formData.append('description', description);\n      formData.append('category', category);\n      formData.append('partnerId', partner.id);\n\n      if (effectiveDate) formData.append('effectiveDate', effectiveDate);\n      if (expirationDate) formData.append('expirationDate', expirationDate);\n\n      // Signers info\n      formData.append('partnerSignerName', partnerSignerName);\n      formData.append('partnerSignerEmail', partnerSignerEmail);\n      formData.append('sovraSignerName', sovraSignerName);\n      formData.append('sovraSignerEmail', sovraSignerEmail);\n\n      const res = await fetch('/api/sovra/documents/send-contract', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const responseData = await res.json();\n\n      if (!res.ok) {\n        throw new Error(responseData.error || 'Error al enviar el contrato');\n      }\n\n      // Show success message with document info\n      console.log('[SendContractModal] Document created:', responseData.document?.id, 'for partner:', partner.id);\n      alert(`Documento creado exitosamente!\\n\\nID: ${responseData.document?.id}\\nPartner: ${partner.companyName} (${partner.id})\\n\\nNota: DocuSign esta en modo demo, los emails no se enviaran.`);\n\n      resetForm();\n      onSuccess();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Error al enviar el contrato');\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n        onClick={handleClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"bg-[var(--color-surface)] rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden border border-[var(--color-border)]\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)]\">Enviar Contrato DocuSign</h2>\n              <p className=\"text-sm text-[var(--color-text-secondary)]\">a {partner.companyName}</p>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"p-2 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-hover)] transition-colors\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"p-4 space-y-4 overflow-y-auto max-h-[calc(90vh-140px)]\">\n            {error && (\n              <div className=\"flex items-center gap-2 p-3 bg-red-500/10 text-red-500 rounded-lg text-sm\">\n                <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\n                {error}\n              </div>\n            )}\n\n            {/* Type and Title Row */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                  Tipo de contrato *\n                </label>\n                <select\n                  value={category}\n                  onChange={(e) => setCategory(e.target.value as ContractCategory)}\n                  required\n                  className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                >\n                  {contractTypes.map((type) => (\n                    <option key={type.value} value={type.value}>\n                      {type.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                  Titulo del contrato *\n                </label>\n                <input\n                  type=\"text\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  required\n                  placeholder=\"Ej: Acuerdo de Partner 2026\"\n                  className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] placeholder:text-[var(--color-text-muted)]\"\n                />\n              </div>\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Descripcion (opcional)\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                rows={2}\n                placeholder=\"Descripcion breve del contrato...\"\n                className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] resize-none placeholder:text-[var(--color-text-muted)]\"\n              />\n            </div>\n\n            {/* Dates */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                  Fecha de vigencia\n                </label>\n                <input\n                  type=\"date\"\n                  value={effectiveDate}\n                  onChange={(e) => setEffectiveDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                  Fecha de vencimiento\n                </label>\n                <input\n                  type=\"date\"\n                  value={expirationDate}\n                  onChange={(e) => setExpirationDate(e.target.value)}\n                  min={effectiveDate || new Date().toISOString().split('T')[0]}\n                  className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                />\n              </div>\n            </div>\n\n            {/* Signers */}\n            <div className=\"border border-[var(--color-border)] rounded-lg p-4 space-y-4\">\n              <h3 className=\"font-medium text-[var(--color-text-primary)] flex items-center gap-2\">\n                <User className=\"h-4 w-4\" />\n                Firmantes\n              </h3>\n\n              {/* Partner Signer */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-xs font-medium text-[var(--color-text-secondary)] mb-1\">\n                    Nombre del Partner *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={partnerSignerName}\n                    onChange={(e) => setPartnerSignerName(e.target.value)}\n                    required\n                    className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-medium text-[var(--color-text-secondary)] mb-1\">\n                    Email del Partner *\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={partnerSignerEmail}\n                    onChange={(e) => setPartnerSignerEmail(e.target.value)}\n                    required\n                    className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                  />\n                </div>\n              </div>\n\n              {/* Sovra Signer */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-xs font-medium text-[var(--color-text-secondary)] mb-1\">\n                    Nombre de Sovra *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={sovraSignerName}\n                    onChange={(e) => setSovraSignerName(e.target.value)}\n                    required\n                    className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-medium text-[var(--color-text-secondary)] mb-1\">\n                    Email de Sovra *\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={sovraSignerEmail}\n                    onChange={(e) => setSovraSignerEmail(e.target.value)}\n                    required\n                    className=\"w-full px-3 py-2 border border-[var(--color-border)] bg-[var(--color-surface)] text-[var(--color-text-primary)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* File Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                Documento PDF *\n              </label>\n              <div\n                onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\n                onDragLeave={() => setIsDragging(false)}\n                onDrop={handleDrop}\n                onClick={() => fileInputRef.current?.click()}\n                className={`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${\n                  isDragging\n                    ? 'border-[var(--color-primary)] bg-[var(--color-primary)]/10'\n                    : file\n                    ? 'border-green-500 bg-green-500/10'\n                    : 'border-[var(--color-border)] hover:border-[var(--color-border-hover)]'\n                }`}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={(e) => handleFileChange(e.target.files?.[0] || null)}\n                  accept=\".pdf\"\n                  className=\"hidden\"\n                />\n                {file ? (\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <FileText className=\"h-6 w-6 text-green-500\" />\n                    <span className=\"text-sm text-green-500 font-medium\">{file.name}</span>\n                    <button\n                      type=\"button\"\n                      onClick={(e) => { e.stopPropagation(); setFile(null); }}\n                      className=\"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <Upload className=\"mx-auto h-8 w-8 text-[var(--color-text-muted)]\" />\n                    <p className=\"mt-2 text-sm text-[var(--color-text-secondary)]\">\n                      Arrastra un archivo PDF o haz clic para seleccionar\n                    </p>\n                    <p className=\"text-xs text-[var(--color-text-muted)] mt-1\">\n                      Solo archivos PDF (max 10MB)\n                    </p>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Info */}\n            <div className=\"bg-[var(--color-primary)]/10 rounded-lg p-3 text-sm text-[var(--color-primary)]\">\n              <p>\n                <strong>Nota:</strong> El contrato sera enviado a ambos firmantes via DocuSign.\n                Recibiran un email con el enlace para firmar.\n              </p>\n            </div>\n\n            {/* Mock Mode Warning */}\n            <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-sm text-amber-600 dark:text-amber-400\">\n              <p>\n                <strong>Modo Demo:</strong> DocuSign no esta configurado. Los documentos se crearan\n                pero los emails de firma no se enviaran. Para activar DocuSign, configura las\n                variables de entorno necesarias.\n              </p>\n            </div>\n          </form>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end gap-3 p-4 border-t border-[var(--color-border)]\">\n            <Button variant=\"outline\" onClick={handleClose} disabled={isSending}>\n              Cancelar\n            </Button>\n            <Button onClick={handleSubmit} disabled={isSending || !file || !title}>\n              <Send className=\"h-4 w-4 mr-2\" />\n              {isSending ? 'Enviando...' : 'Enviar Contrato'}\n            </Button>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Download, FileText, CheckCircle, Clock, AlertTriangle, User, Calendar, Shield } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button, Badge } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { LegalDocument, DocumentAuditEvent, DocumentStatus } from '@/types';\n\ninterface AdminDocumentDetailProps {\n  document: LegalDocument;\n  isOpen: boolean;\n  onClose: () => void;\n  onRefresh: () => void;\n}\n\nconst statusConfig: Record<DocumentStatus, { color: string; label: string }> = {\n  draft: { color: 'text-[var(--color-text-secondary)]', label: 'Borrador' },\n  pending_signature: { color: 'text-amber-500', label: 'Pendiente Firma' },\n  partially_signed: { color: 'text-[var(--color-primary)]', label: 'Parcialmente Firmado' },\n  active: { color: 'text-green-500', label: 'Activo' },\n  expired: { color: 'text-red-500', label: 'Expirado' },\n  superseded: { color: 'text-[var(--color-text-muted)]', label: 'Reemplazado' },\n  archived: { color: 'text-[var(--color-text-muted)]', label: 'Archivado' },\n};\n\nconst categoryLabels: Record<string, string> = {\n  contract: 'Contrato',\n  amendment: 'Addendum',\n  compliance: 'Compliance',\n  financial: 'Financiero',\n  certification: 'Certificacion',\n  policy: 'Politica',\n  correspondence: 'Correspondencia',\n};\n\nexport function AdminDocumentDetail({ document, isOpen, onClose, onRefresh }: AdminDocumentDetailProps) {\n  const [auditEvents, setAuditEvents] = useState<DocumentAuditEvent[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && document.id) {\n      fetchAuditEvents();\n    }\n  }, [isOpen, document.id]);\n\n  const fetchAuditEvents = async () => {\n    setIsLoading(true);\n    try {\n      const res = await fetch(`/api/sovra/documents/${document.id}`);\n      if (res.ok) {\n        const data = await res.json();\n        setAuditEvents(data.auditEvents || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch audit events:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const formatShortDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const handleVerify = async (approved: boolean) => {\n    try {\n      const res = await fetch(`/api/sovra/documents/${document.id}/verify`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          status: approved ? 'verified' : 'rejected',\n          notes: approved ? 'Documento verificado por admin' : 'Documento rechazado por admin',\n        }),\n      });\n\n      if (res.ok) {\n        onRefresh();\n        onClose();\n      }\n    } catch (error) {\n      console.error('Failed to verify document:', error);\n    }\n  };\n\n  const getActionIcon = (action: DocumentAuditEvent['action']) => {\n    switch (action) {\n      case 'created':\n      case 'uploaded':\n        return FileText;\n      case 'signed':\n        return CheckCircle;\n      case 'sent_for_signature':\n        return Clock;\n      case 'declined':\n      case 'rejected':\n        return AlertTriangle;\n      case 'verified':\n        return Shield;\n      default:\n        return FileText;\n    }\n  };\n\n  const getActionLabel = (action: string) => {\n    const labels: Record<string, string> = {\n      created: 'Documento creado',\n      uploaded: 'Documento subido',\n      signed: 'Firmado',\n      sent_for_signature: 'Enviado para firma',\n      viewed: 'Visualizado',\n      downloaded: 'Descargado',\n      declined: 'Rechazado',\n      rejected: 'Rechazado',\n      expired: 'Expirado',\n      archived: 'Archivado',\n      new_version_created: 'Nueva version creada',\n      verified: 'Verificado',\n    };\n    return labels[action] || action;\n  };\n\n  const needsVerification =\n    document.type === 'upload' && document.uploadMetadata?.verificationStatus === 'pending';\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"bg-[var(--color-surface)] rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-[var(--color-border)]\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\n            <div className=\"flex-1 min-w-0\">\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] truncate\">\n                {document.title}\n              </h2>\n              {document.version > 1 && (\n                <span className=\"text-sm text-[var(--color-text-secondary)]\">v{document.version}</span>\n              )}\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-hover)] transition-colors ml-4\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n            {/* Status and Badges */}\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <Badge\n                variant={document.status === 'active' ? 'success' : document.status === 'pending_signature' ? 'warning' : 'secondary'}\n              >\n                {statusConfig[document.status].label}\n              </Badge>\n              <Badge variant=\"outline\">\n                {categoryLabels[document.category]}\n              </Badge>\n              {document.type === 'docusign' && (\n                <Badge variant=\"outline\">DocuSign</Badge>\n              )}\n              {needsVerification && (\n                <Badge variant=\"warning\">Pendiente Verificacion</Badge>\n              )}\n            </div>\n\n            {/* Description */}\n            {document.description && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-1\">Descripcion</h3>\n                <p className=\"text-sm text-[var(--color-text-secondary)]\">{document.description}</p>\n              </div>\n            )}\n\n            {/* Document Info */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              {document.effectiveDate && (\n                <div>\n                  <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                    <Calendar className=\"h-4 w-4\" />\n                    Fecha de vigencia\n                  </div>\n                  <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                    {formatShortDate(document.effectiveDate)}\n                  </p>\n                </div>\n              )}\n\n              {document.expirationDate && (\n                <div>\n                  <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                    <Calendar className=\"h-4 w-4\" />\n                    Fecha de vencimiento\n                  </div>\n                  <p className={cn(\n                    'text-sm font-medium',\n                    new Date(document.expirationDate) < new Date()\n                      ? 'text-red-500'\n                      : 'text-[var(--color-text-primary)]'\n                  )}>\n                    {formatShortDate(document.expirationDate)}\n                  </p>\n                </div>\n              )}\n\n              <div>\n                <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                  <User className=\"h-4 w-4\" />\n                  Creado por\n                </div>\n                <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                  {document.createdByName || 'Desconocido'}\n                </p>\n              </div>\n\n              <div>\n                <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                  <Calendar className=\"h-4 w-4\" />\n                  Fecha de creacion\n                </div>\n                <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                  {formatShortDate(document.createdAt)}\n                </p>\n              </div>\n            </div>\n\n            {/* DocuSign Signers */}\n            {document.type === 'docusign' && document.docusignMetadata?.signers && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">Firmas</h3>\n                <div className=\"space-y-2\">\n                  {document.docusignMetadata.signers.map((signer, idx) => (\n                    <div\n                      key={idx}\n                      className=\"flex items-center justify-between p-3 bg-[var(--color-surface-hover)] rounded-lg\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-8 w-8 rounded-full bg-[var(--color-primary)]/10 flex items-center justify-center\">\n                          <User className=\"h-4 w-4 text-[var(--color-primary)]\" />\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">{signer.name}</p>\n                          <p className=\"text-xs text-[var(--color-text-secondary)]\">\n                            {signer.role === 'sovra' ? 'Sovra' : 'Partner'} - {signer.email}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        {signer.status === 'signed' ? (\n                          <>\n                            <Badge variant=\"success\" className=\"text-xs\">Firmado</Badge>\n                            {signer.signedAt && (\n                              <p className=\"text-xs text-[var(--color-text-secondary)] mt-1\">\n                                {formatDate(signer.signedAt)}\n                              </p>\n                            )}\n                          </>\n                        ) : signer.status === 'declined' ? (\n                          <Badge variant=\"destructive\" className=\"text-xs\">Rechazado</Badge>\n                        ) : (\n                          <Badge variant=\"warning\" className=\"text-xs\">Pendiente</Badge>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Upload Info */}\n            {document.type === 'upload' && document.uploadMetadata && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">Informacion del archivo</h3>\n                <div className=\"p-3 bg-[var(--color-surface-hover)] rounded-lg space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-[var(--color-text-secondary)]\">Nombre del archivo</span>\n                    <span className=\"text-[var(--color-text-primary)]\">{document.uploadMetadata.fileName}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-[var(--color-text-secondary)]\">Subido por</span>\n                    <span className=\"text-[var(--color-text-primary)]\">\n                      {document.uploadMetadata.uploadedByName}\n                      {document.uploadMetadata.uploadedBy === 'sovra' ? ' (Sovra)' : ' (Partner)'}\n                    </span>\n                  </div>\n                  {document.uploadMetadata.verificationStatus && (\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-[var(--color-text-secondary)]\">Estado de verificacion</span>\n                      <Badge\n                        variant={\n                          document.uploadMetadata.verificationStatus === 'verified'\n                            ? 'success'\n                            : document.uploadMetadata.verificationStatus === 'rejected'\n                            ? 'destructive'\n                            : 'warning'\n                        }\n                      >\n                        {document.uploadMetadata.verificationStatus === 'verified'\n                          ? 'Verificado'\n                          : document.uploadMetadata.verificationStatus === 'rejected'\n                          ? 'Rechazado'\n                          : 'Pendiente'}\n                      </Badge>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Audit Timeline */}\n            {auditEvents.length > 0 && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">Historial</h3>\n                <div className=\"space-y-3\">\n                  {auditEvents.map((event) => {\n                    const Icon = getActionIcon(event.action);\n                    return (\n                      <div key={event.id} className=\"flex gap-3\">\n                        <div className=\"flex-shrink-0\">\n                          <div className=\"h-8 w-8 rounded-full bg-[var(--color-surface-hover)] flex items-center justify-center\">\n                            <Icon className=\"h-4 w-4 text-[var(--color-text-secondary)]\" />\n                          </div>\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm text-[var(--color-text-primary)]\">\n                            {getActionLabel(event.action)}\n                            {event.actorName && (\n                              <span className=\"text-[var(--color-text-secondary)]\"> - {event.actorName}</span>\n                            )}\n                          </p>\n                          <p className=\"text-xs text-[var(--color-text-secondary)]\">\n                            {formatDate(event.timestamp)}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"flex items-center justify-end gap-3 p-4 border-t border-[var(--color-border)]\">\n            {needsVerification && (\n              <>\n                <Button variant=\"outline\" onClick={() => handleVerify(false)}>\n                  Rechazar\n                </Button>\n                <Button onClick={() => handleVerify(true)}>\n                  <CheckCircle className=\"h-4 w-4 mr-2\" />\n                  Verificar\n                </Button>\n              </>\n            )}\n            {document.type === 'docusign' && document.docusignMetadata?.certificateUrl && (\n              <Button variant=\"outline\">\n                <Shield className=\"h-4 w-4 mr-2\" />\n                Descargar Certificado\n              </Button>\n            )}\n            <Button variant=\"outline\">\n              <Download className=\"h-4 w-4 mr-2\" />\n              Descargar\n            </Button>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}