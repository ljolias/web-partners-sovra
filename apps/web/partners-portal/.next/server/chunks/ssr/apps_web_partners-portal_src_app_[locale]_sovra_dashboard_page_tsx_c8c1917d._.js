module.exports=[75871,a=>{"use strict";var b=a.i(33256),c=a.i(13152),d=a.i(95227);let e=(0,d.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f=(0,d.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),g=(0,d.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=a.i(76819);let i=(0,d.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),j=(0,d.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),k=(0,d.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var l=a.i(28957);let m=(0,d.default)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),n=(0,d.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var o=a.i(28982);let p={bronze:{label:"Bronze",emoji:""},silver:{label:"Silver",emoji:""},gold:{label:"Gold",emoji:""},platinum:{label:"Platinum",emoji:""}};async function q({params:a}){let{locale:d}=await a,[q,s,t,u,v,w,x,y,z]=await Promise.all([(0,c.getAllDeals)(),(0,c.getDealsByStatus)("pending_approval"),(0,c.getDealsByStatus)("approved"),(0,c.getDealsByStatus)("rejected"),(0,c.getDealsByStatus)("more_info"),(0,c.getAllPartners)(),(0,c.getPartnersByStatus)("active"),(0,c.getPartnersByStatus)("suspended"),(0,c.getAllAuditLogs)(10)]),A=q.filter(a=>"closed_won"===a.status),B=q.filter(a=>"closed_lost"===a.status),C={bronze:w.filter(a=>"bronze"===a.tier).length,silver:w.filter(a=>"silver"===a.tier).length,gold:w.filter(a=>"gold"===a.tier).length,platinum:w.filter(a=>"platinum"===a.tier).length},D=5e4*t.length+3e4*s.length,E=new Map;for(let a of q){let b=E.get(a.partnerId)||0;E.set(a.partnerId,b+1)}let F=w.map(a=>({...a,dealCount:E.get(a.id)||0,wonCount:q.filter(b=>b.partnerId===a.id&&"closed_won"===b.status).length})).sort((a,b)=>b.dealCount-a.dealCount).slice(0,3),G=[{label:"Partners Activos",value:x.length,icon:j,color:"text-green-500",bgColor:"bg-green-500/10",href:`/${d}/sovra/dashboard/partners?status=active`},{label:"Suspendidos",value:y.length,icon:i,color:"text-red-500",bgColor:"bg-red-500/10",href:`/${d}/sovra/dashboard/partners?status=suspended`},{label:"Total Partners",value:w.length,icon:k,color:"text-blue-500",bgColor:"bg-blue-500/10",href:`/${d}/sovra/dashboard/partners`},{label:"Tasa Certificacion",value:`${w.length>0?Math.round(x.length/w.length*100):0}%`,icon:m,color:"text-indigo-500",bgColor:"bg-indigo-500/10"}],H=[{label:"Pendientes",value:s.length,icon:e,color:"text-amber-500",bgColor:"bg-amber-500/10",href:`/${d}/sovra/dashboard/approvals`},{label:"Aprobadas",value:t.length,icon:f,color:"text-green-500",bgColor:"bg-green-500/10"},{label:"Ganadas",value:A.length,icon:h.Trophy,color:"text-[var(--color-primary)]",bgColor:"bg-[var(--color-primary)]/10"},{label:"Perdidas",value:B.length,icon:g,color:"text-[var(--color-text-secondary)]",bgColor:"bg-[var(--color-surface-hover)]"}],I=z.map(a=>({id:a.id,actorName:a.actorName,action:({"partner.created":"creo un nuevo partner","partner.updated":"actualizo un partner","partner.suspended":"suspendio un partner","partner.reactivated":"reactivo un partner","partner.tier_changed":"cambio el nivel de un partner","credential.issued":"emitio una credencial","credential.revoked":"revoco una credencial","deal.approved":"aprobo una oportunidad","deal.rejected":"rechazo una oportunidad","deal.info_requested":"solicito mas informacion","document.shared":"compartio un documento","document.verified":"verifico un documento","pricing.updated":"actualizo los precios","course.created":"creo un curso","course.updated":"actualizo un curso","course.published":"publico un curso"})[a.action]||a.action,entityName:a.entityName,timestamp:a.timestamp})),J=q.slice(0,5);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:(0,b.jsx)("span",{className:"text-[var(--color-primary)]",children:"Dashboard"})}),(0,b.jsx)("p",{className:"text-[var(--color-text-secondary)]",children:"Panel de administracion Sovra"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)] mb-4 flex items-center gap-2",children:[(0,b.jsx)(k,{className:"w-5 h-5"}),"Partners"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:G.map(a=>{let c=a.icon,d=(0,b.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-4",children:[(0,b.jsx)("div",{className:`w-10 h-10 ${a.bgColor} rounded-lg flex items-center justify-center mb-3`,children:(0,b.jsx)(c,{className:`w-5 h-5 ${a.color}`})}),(0,b.jsx)("p",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:a.value}),(0,b.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:a.label})]});return a.href?(0,b.jsx)(o.default,{href:a.href,className:"hover:shadow-md transition-shadow rounded-xl",children:d},a.label):(0,b.jsx)("div",{children:d},a.label)})}),(0,b.jsxs)("div",{className:"mt-4 bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-4",children:[(0,b.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)] mb-2",children:"Por Nivel:"}),(0,b.jsx)("div",{className:"flex gap-4 flex-wrap",children:Object.entries(C).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm",children:p[a].emoji}),(0,b.jsxs)("span",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:[p[a].label,": ",c]})]},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)] mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.Trophy,{className:"w-5 h-5"}),"Oportunidades"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:H.map(a=>{let c=a.icon,d=(0,b.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)] p-4",children:[(0,b.jsx)("div",{className:`w-10 h-10 ${a.bgColor} rounded-lg flex items-center justify-center mb-3`,children:(0,b.jsx)(c,{className:`w-5 h-5 ${a.color}`})}),(0,b.jsx)("p",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:a.value}),(0,b.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:a.label})]});return a.href?(0,b.jsx)(o.default,{href:a.href,className:"hover:shadow-md transition-shadow rounded-xl",children:d},a.label):(0,b.jsx)("div",{children:d},a.label)})}),(0,b.jsx)("div",{className:"mt-4 bg-gradient-to-r from-[var(--color-primary)]/10 to-[var(--color-accent-purple)]/10 rounded-xl border border-[var(--color-primary)]/20 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.DollarSign,{className:"w-6 h-6 text-[var(--color-primary)]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:"Pipeline Estimado"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:["$",D.toLocaleString("en-US")," USD"]})]})]})})]}),s.length>0&&(0,b.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e,{className:"w-5 h-5 text-amber-500"}),(0,b.jsxs)("p",{className:"text-amber-500",children:["Tienes ",(0,b.jsx)("strong",{children:s.length})," oportunidades pendientes de aprobacion"]})]}),(0,b.jsx)(o.default,{href:`/${d}/sovra/dashboard/approvals`,className:"px-4 py-2 bg-amber-500 text-white rounded-lg text-sm hover:bg-amber-600",children:"Revisar ahora"})]})}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)]",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-[var(--color-border)] flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:"Top Partners por Oportunidades"}),(0,b.jsx)(o.default,{href:`/${d}/sovra/dashboard/partners`,className:"text-sm text-[var(--color-primary)] hover:underline",children:"Ver todos"})]}),(0,b.jsx)("div",{className:"divide-y divide-[var(--color-border)]",children:0===F.length?(0,b.jsx)("div",{className:"p-6 text-center text-[var(--color-text-secondary)]",children:"No hay partners registrados"}):F.map((a,c)=>{let e=[{bg:"bg-yellow-100",text:"text-yellow-700",label:"1"},{bg:"bg-[var(--color-surface-hover)]",text:"text-[var(--color-text-secondary)]",label:"2"},{bg:"bg-amber-100",text:"text-amber-700",label:"3"}][c]||{bg:"bg-[var(--color-primary)]/10",text:"text-[var(--color-primary)]",label:`${c+1}`};return(0,b.jsxs)(o.default,{href:`/${d}/sovra/dashboard/partners/${a.id}`,className:"px-6 py-4 flex items-center justify-between hover:bg-[var(--color-surface-hover)] transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full ${e.bg} flex items-center justify-center`,children:(0,b.jsx)("span",{className:`text-sm font-bold ${e.text}`,children:e.label})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-[var(--color-text-primary)]",children:a.companyName||a.name}),(0,b.jsxs)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[a.country," - ",p[a.tier].label]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-[var(--color-text-primary)]",children:a.dealCount}),(0,b.jsxs)("p",{className:"text-xs text-green-500",children:[a.wonCount," ganadas"]})]})]},a.id)})})]}),(0,b.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)]",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-[var(--color-border)] flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)] flex items-center gap-2",children:[(0,b.jsx)(n,{className:"w-5 h-5"}),"Actividad Reciente"]}),(0,b.jsx)(o.default,{href:`/${d}/sovra/dashboard/audit`,className:"text-sm text-[var(--color-primary)] hover:underline",children:"Ver todo"})]}),(0,b.jsx)("div",{className:"divide-y divide-[var(--color-border)]",children:0===I.length?(0,b.jsx)("div",{className:"p-6 text-center text-[var(--color-text-secondary)]",children:"No hay actividad reciente"}):I.map(a=>(0,b.jsxs)("div",{className:"px-6 py-3",children:[(0,b.jsxs)("p",{className:"text-sm text-[var(--color-text-primary)]",children:[(0,b.jsx)("span",{className:"font-medium",children:a.actorName})," ",(0,b.jsx)("span",{className:"text-[var(--color-text-secondary)]",children:a.action}),a.entityName&&(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)("span",{className:"font-medium",children:a.entityName})]})]}),(0,b.jsx)("p",{className:"text-xs text-[var(--color-text-secondary)] mt-1",children:new Date(a.timestamp).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl border border-[var(--color-border)]",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-[var(--color-border)] flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:"Oportunidades Recientes"}),(0,b.jsx)(o.default,{href:`/${d}/sovra/dashboard/approvals?status=all`,className:"text-sm text-[var(--color-primary)] hover:underline",children:"Ver todas"})]}),(0,b.jsx)("div",{className:"divide-y divide-[var(--color-border)]",children:0===J.length?(0,b.jsx)("div",{className:"p-6 text-center text-[var(--color-text-secondary)]",children:"No hay oportunidades registradas"}):J.map(a=>(0,b.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-[var(--color-text-primary)]",children:a.clientName}),(0,b.jsxs)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:[a.country," - ",a.governmentLevel]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--color-text-secondary)]",children:new Date(a.createdAt).toLocaleDateString("es")}),(0,b.jsx)(r,{status:a.status})]})]},a.id))})]})]})}function r({status:a}){let c={pending_approval:{label:"Pendiente",className:"bg-amber-500/10 text-amber-500"},approved:{label:"Aprobada",className:"bg-green-500/10 text-green-500"},rejected:{label:"Rechazada",className:"bg-red-500/10 text-red-500"},more_info:{label:"Mas Info",className:"bg-orange-500/10 text-orange-500"},closed_won:{label:"Ganada",className:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"},closed_lost:{label:"Perdida",className:"bg-[var(--color-surface-hover)] text-[var(--color-text-secondary)]"}}[a]||{label:a,className:"bg-[var(--color-surface-hover)] text-[var(--color-text-secondary)]"};return(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.className}`,children:c.label})}a.s(["default",()=>q],75871)}];

//# sourceMappingURL=apps_web_partners-portal_src_app_%5Blocale%5D_sovra_dashboard_page_tsx_c8c1917d._.js.map