{"version":3,"sources":["../../../../../../../apps/web/partners-portal/src/components/legal/DocumentCard.tsx","../../../../../../../apps/web/partners-portal/src/components/legal/DocumentFilters.tsx","../../../../../../../apps/web/partners-portal/src/components/legal/DocumentUploadModal.tsx","../../../../../../../apps/web/partners-portal/src/components/legal/DocumentDetail.tsx","../../../../../../../apps/web/partners-portal/src/components/legal/DocumentList.tsx","../../../../../../../apps/web/partners-portal/src/components/legal/ExpirationBadge.tsx","../../../../../../../apps/web/partners-portal/src/app/%5Blocale%5D/partners/portal/legal/page.tsx","../../../../../../../node_modules/.pnpm/lucide-react%400.563.0_react%4019.2.3/node_modules/lucide-react/src/icons/pen.ts"],"sourcesContent":["'use client';\n\nimport { FileText, CheckCircle, Clock, AlertTriangle, Upload, Pen, Download, Eye } from 'lucide-react';\nimport { Card, CardContent, Badge, Button } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { LegalDocument, DocumentCategory, DocumentStatus } from '@/types';\n\ninterface DocumentCardProps {\n  document: LegalDocument;\n  locale: string;\n  onView?: () => void;\n  onDownload?: () => void;\n  onSign?: () => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  t: (key: string, params?: any) => string;\n}\n\nconst categoryIcons: Record<DocumentCategory, React.ComponentType<{ className?: string }>> = {\n  contract: FileText,\n  amendment: FileText,\n  compliance: CheckCircle,\n  financial: FileText,\n  certification: CheckCircle,\n  policy: FileText,\n  correspondence: FileText,\n};\n\nconst statusConfig: Record<\n  DocumentStatus,\n  { color: string; bgColor: string; icon: React.ComponentType<{ className?: string }> }\n> = {\n  draft: { color: 'text-[var(--color-text-secondary)]', bgColor: 'bg-[var(--color-surface-hover)]', icon: FileText },\n  pending_signature: { color: 'text-amber-500', bgColor: 'bg-amber-500/10', icon: Clock },\n  partially_signed: { color: 'text-[var(--color-primary)]', bgColor: 'bg-[var(--color-primary)]/10', icon: Pen },\n  active: { color: 'text-green-500', bgColor: 'bg-green-500/10', icon: CheckCircle },\n  expired: { color: 'text-red-500', bgColor: 'bg-red-500/10', icon: AlertTriangle },\n  superseded: { color: 'text-[var(--color-text-muted)]', bgColor: 'bg-[var(--color-surface-hover)]', icon: FileText },\n  archived: { color: 'text-[var(--color-text-muted)]', bgColor: 'bg-[var(--color-surface-hover)]', icon: FileText },\n};\n\nexport function DocumentCard({ document, locale, onView, onDownload, onSign, t }: DocumentCardProps) {\n  const CategoryIcon = categoryIcons[document.category] || FileText;\n  const statusInfo = statusConfig[document.status];\n  const StatusIcon = statusInfo.icon;\n\n  const isDocuSign = document.type === 'docusign';\n  const isUpload = document.type === 'upload';\n\n  const needsSignature =\n    document.status === 'pending_signature' || document.status === 'partially_signed';\n\n  const formatDate = (dateStr?: string) => {\n    if (!dateStr) return '';\n    return new Date(dateStr).toLocaleDateString(locale === 'es' ? 'es-ES' : locale === 'pt' ? 'pt-BR' : 'en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <Card className=\"hover:shadow-md transition-shadow\">\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start gap-4\">\n          {/* Icon */}\n          <div className={cn('flex h-12 w-12 items-center justify-center rounded-lg', statusInfo.bgColor)}>\n            <StatusIcon className={cn('h-6 w-6', statusInfo.color)} />\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <h3 className=\"font-semibold text-[var(--color-text-primary)] truncate\">\n                {document.title}\n              </h3>\n              {document.version > 1 && (\n                <span className=\"text-xs text-[var(--color-text-secondary)]\">v{document.version}</span>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {t(`categories.${document.category}`)}\n              </Badge>\n\n              {isDocuSign && (\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  DocuSign\n                </Badge>\n              )}\n\n              {isUpload && document.uploadMetadata?.verificationStatus === 'pending' && (\n                <Badge variant=\"warning\" className=\"text-xs\">\n                  {t('status.pendingVerification')}\n                </Badge>\n              )}\n\n              {isUpload && document.uploadMetadata?.verificationStatus === 'verified' && (\n                <Badge variant=\"success\" className=\"text-xs\">\n                  {t('status.verified')}\n                </Badge>\n              )}\n            </div>\n\n            <div className=\"mt-2 text-sm text-[var(--color-text-secondary)]\">\n              {document.status === 'active' && document.expirationDate && (\n                <span>{t('validUntil', { date: formatDate(document.expirationDate) })}</span>\n              )}\n              {needsSignature && isDocuSign && document.docusignMetadata?.sentAt && (\n                <span>{t('sentOn', { date: formatDate(document.docusignMetadata.sentAt) })}</span>\n              )}\n              {isUpload && document.uploadMetadata && (\n                <span>\n                  {document.uploadMetadata.uploadedBy === 'sovra'\n                    ? t('sharedBySovra')\n                    : t('uploadedOn', { date: formatDate(document.createdAt) })}\n                </span>\n              )}\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center gap-2\">\n            {needsSignature && onSign && (\n              <Button size=\"sm\" onClick={onSign}>\n                {t('sign')}\n              </Button>\n            )}\n            {onView && (\n              <Button size=\"sm\" variant=\"outline\" onClick={onView}>\n                <Eye className=\"h-4 w-4\" />\n              </Button>\n            )}\n            {onDownload && (document.status === 'active' || isUpload) && (\n              <Button size=\"sm\" variant=\"outline\" onClick={onDownload}>\n                <Download className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { Search, Filter, X } from 'lucide-react';\nimport { Button, Badge } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { DocumentCategory, DocumentStatus } from '@/types';\n\ninterface DocumentFiltersProps {\n  onSearch: (query: string) => void;\n  onCategoryChange: (category: DocumentCategory | 'all') => void;\n  onStatusChange: (status: DocumentStatus | 'all') => void;\n  selectedCategory: DocumentCategory | 'all';\n  selectedStatus: DocumentStatus | 'all';\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  t: (key: string, params?: any) => string;\n}\n\nconst categories: Array<{ value: DocumentCategory | 'all'; labelKey: string }> = [\n  { value: 'all', labelKey: 'all' },\n  { value: 'contract', labelKey: 'categories.contract' },\n  { value: 'amendment', labelKey: 'categories.amendment' },\n  { value: 'compliance', labelKey: 'categories.compliance' },\n  { value: 'financial', labelKey: 'categories.financial' },\n  { value: 'certification', labelKey: 'categories.certification' },\n  { value: 'policy', labelKey: 'categories.policy' },\n  { value: 'correspondence', labelKey: 'categories.correspondence' },\n];\n\nconst statuses: Array<{ value: DocumentStatus | 'all'; labelKey: string }> = [\n  { value: 'all', labelKey: 'all' },\n  { value: 'pending_signature', labelKey: 'status.pending_signature' },\n  { value: 'partially_signed', labelKey: 'status.partially_signed' },\n  { value: 'active', labelKey: 'status.active' },\n  { value: 'expired', labelKey: 'status.expired' },\n  { value: 'archived', labelKey: 'status.archived' },\n];\n\nexport function DocumentFilters({\n  onSearch,\n  onCategoryChange,\n  onStatusChange,\n  selectedCategory,\n  selectedStatus,\n  t,\n}: DocumentFiltersProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showFilters, setShowFilters] = useState(false);\n\n  const handleSearchChange = (value: string) => {\n    setSearchQuery(value);\n    onSearch(value);\n  };\n\n  const clearFilters = () => {\n    setSearchQuery('');\n    onSearch('');\n    onCategoryChange('all');\n    onStatusChange('all');\n  };\n\n  const hasActiveFilters =\n    searchQuery !== '' || selectedCategory !== 'all' || selectedStatus !== 'all';\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Search and Filter Toggle */}\n      <div className=\"flex flex-col sm:flex-row gap-3\">\n        {/* Search Input */}\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-text-secondary)]\" />\n          <input\n            type=\"text\"\n            placeholder={t('searchPlaceholder')}\n            value={searchQuery}\n            onChange={(e) => handleSearchChange(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 bg-[var(--color-surface)] border border-[var(--color-border)] rounded-lg text-sm text-[var(--color-text-primary)] placeholder:text-[var(--color-text-secondary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/20 focus:border-[var(--color-primary)]\"\n          />\n          {searchQuery && (\n            <button\n              onClick={() => handleSearchChange('')}\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          )}\n        </div>\n\n        {/* Filter Toggle */}\n        <Button\n          variant={showFilters ? 'primary' : 'outline'}\n          onClick={() => setShowFilters(!showFilters)}\n          className=\"flex items-center gap-2\"\n        >\n          <Filter className=\"h-4 w-4\" />\n          {t('filters')}\n          {hasActiveFilters && (\n            <Badge variant=\"primary\" className=\"ml-1 h-5 w-5 p-0 flex items-center justify-center rounded-full text-xs\">\n              !\n            </Badge>\n          )}\n        </Button>\n\n        {hasActiveFilters && (\n          <Button variant=\"ghost\" onClick={clearFilters} className=\"text-sm\">\n            {t('clearFilters')}\n          </Button>\n        )}\n      </div>\n\n      {/* Filter Options */}\n      {showFilters && (\n        <div className=\"p-4 bg-[var(--color-surface)] border border-[var(--color-border)] rounded-lg space-y-4\">\n          {/* Category Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-2\">\n              {t('category')}\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {categories.map((cat) => (\n                <button\n                  key={cat.value}\n                  onClick={() => onCategoryChange(cat.value)}\n                  className={cn(\n                    'px-3 py-1.5 text-sm rounded-lg border transition-colors',\n                    selectedCategory === cat.value\n                      ? 'bg-[var(--color-primary)] text-white border-[var(--color-primary)]'\n                      : 'bg-[var(--color-surface)] text-[var(--color-text-secondary)] border-[var(--color-border)] hover:border-[var(--color-primary)] hover:text-[var(--color-text-primary)]'\n                  )}\n                >\n                  {t(cat.labelKey)}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Status Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-2\">\n              {t('statusLabel')}\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {statuses.map((status) => (\n                <button\n                  key={status.value}\n                  onClick={() => onStatusChange(status.value)}\n                  className={cn(\n                    'px-3 py-1.5 text-sm rounded-lg border transition-colors',\n                    selectedStatus === status.value\n                      ? 'bg-[var(--color-primary)] text-white border-[var(--color-primary)]'\n                      : 'bg-[var(--color-surface)] text-[var(--color-text-secondary)] border-[var(--color-border)] hover:border-[var(--color-primary)] hover:text-[var(--color-text-primary)]'\n                  )}\n                >\n                  {t(status.labelKey)}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useCallback, useRef } from 'react';\nimport { X, Upload, FileText, AlertCircle } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button, SovraLoader } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { DocumentCategory } from '@/types';\n\ninterface DocumentUploadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onUpload: (data: UploadData) => Promise<void>;\n  allowedCategories: Array<{ id: DocumentCategory; name: string; description: string }>;\n  t: (key: string) => string;\n}\n\nexport interface UploadData {\n  file: File;\n  category: DocumentCategory;\n  title: string;\n  description?: string;\n  expirationDate?: string;\n}\n\nconst ALLOWED_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'image/png',\n  'image/jpeg',\n];\n\nconst MAX_SIZE = 10 * 1024 * 1024; // 10MB\n\nexport function DocumentUploadModal({\n  isOpen,\n  onClose,\n  onUpload,\n  allowedCategories,\n  t,\n}: DocumentUploadModalProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [category, setCategory] = useState<DocumentCategory | ''>('');\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [expirationDate, setExpirationDate] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDragActive, setIsDragActive] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateFile = (file: File): string | null => {\n    if (file.size > MAX_SIZE) {\n      return t('errors.fileTooLarge');\n    }\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      return t('errors.invalidFileType');\n    }\n    return null;\n  };\n\n  const handleFileSelect = useCallback((selectedFile: File) => {\n    const validationError = validateFile(selectedFile);\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setFile(selectedFile);\n    setError(null);\n    // Auto-fill title from filename if empty\n    if (!title) {\n      const nameWithoutExt = selectedFile.name.replace(/\\.[^/.]+$/, '');\n      setTitle(nameWithoutExt);\n    }\n  }, [title, t]);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragActive(false);\n\n    const droppedFile = e.dataTransfer.files[0];\n    if (droppedFile) {\n      handleFileSelect(droppedFile);\n    }\n  }, [handleFileSelect]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragActive(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragActive(false);\n  }, []);\n\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile) {\n      handleFileSelect(selectedFile);\n    }\n  }, [handleFileSelect]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!file || !category || !title) {\n      setError(t('errors.requiredFields'));\n      return;\n    }\n\n    setIsUploading(true);\n    setError(null);\n\n    try {\n      await onUpload({\n        file,\n        category: category as DocumentCategory,\n        title,\n        description: description || undefined,\n        expirationDate: expirationDate || undefined,\n      });\n      handleClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : t('errors.uploadFailed'));\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setFile(null);\n    setCategory('');\n    setTitle('');\n    setDescription('');\n    setExpirationDate('');\n    setError(null);\n    onClose();\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n        onClick={handleClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"bg-[var(--color-surface)] rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\n            <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)]\">\n              {t('uploadDocument')}\n            </h2>\n            <button\n              onClick={handleClose}\n              className=\"p-2 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-hover)] transition-colors\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n            {/* Error Message */}\n            {error && (\n              <div className=\"flex items-center gap-2 p-3 bg-red-500/10 text-red-500 rounded-lg text-sm\">\n                <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\n                <span>{error}</span>\n              </div>\n            )}\n\n            {/* Category Select */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                {t('category')} *\n              </label>\n              <select\n                value={category}\n                onChange={(e) => setCategory(e.target.value as DocumentCategory)}\n                className=\"w-full px-3 py-2 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-sm text-[var(--color-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/20 focus:border-[var(--color-primary)]\"\n                required\n              >\n                <option value=\"\">{t('selectCategory')}</option>\n                {allowedCategories.map((cat) => (\n                  <option key={cat.id} value={cat.id}>\n                    {cat.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Title Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                {t('documentTitle')} *\n              </label>\n              <input\n                type=\"text\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                placeholder={t('titlePlaceholder')}\n                className=\"w-full px-3 py-2 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-sm text-[var(--color-text-primary)] placeholder:text-[var(--color-text-secondary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/20 focus:border-[var(--color-primary)]\"\n                required\n              />\n            </div>\n\n            {/* Description Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                {t('description')}\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder={t('descriptionPlaceholder')}\n                rows={3}\n                className=\"w-full px-3 py-2 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-sm text-[var(--color-text-primary)] placeholder:text-[var(--color-text-secondary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/20 focus:border-[var(--color-primary)] resize-none\"\n              />\n            </div>\n\n            {/* Expiration Date */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                {t('expirationDate')}\n              </label>\n              <input\n                type=\"date\"\n                value={expirationDate}\n                onChange={(e) => setExpirationDate(e.target.value)}\n                min={new Date().toISOString().split('T')[0]}\n                className=\"w-full px-3 py-2 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-sm text-[var(--color-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/20 focus:border-[var(--color-primary)]\"\n              />\n            </div>\n\n            {/* File Drop Zone */}\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                {t('file')} *\n              </label>\n              <div\n                onDrop={handleDrop}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onClick={() => fileInputRef.current?.click()}\n                className={cn(\n                  'border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors',\n                  isDragActive\n                    ? 'border-[var(--color-primary)] bg-[var(--color-primary)]/5'\n                    : 'border-[var(--color-border)] hover:border-[var(--color-primary)]/50'\n                )}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={handleInputChange}\n                  accept=\".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg\"\n                  className=\"hidden\"\n                />\n\n                {file ? (\n                  <div className=\"flex items-center justify-center gap-3\">\n                    <FileText className=\"h-8 w-8 text-[var(--color-primary)]\" />\n                    <div className=\"text-left\">\n                      <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">{file.name}</p>\n                      <p className=\"text-xs text-[var(--color-text-secondary)]\">\n                        {formatFileSize(file.size)}\n                      </p>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setFile(null);\n                      }}\n                      className=\"p-1 rounded-full hover:bg-[var(--color-surface-hover)]\"\n                    >\n                      <X className=\"h-4 w-4 text-[var(--color-text-secondary)]\" />\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <Upload className=\"h-8 w-8 mx-auto text-[var(--color-text-secondary)] mb-2\" />\n                    <p className=\"text-sm text-[var(--color-text-secondary)]\">\n                      {isDragActive ? t('dropHere') : t('dragOrClick')}\n                    </p>\n                    <p className=\"text-xs text-[var(--color-text-secondary)] mt-1\">\n                      PDF, DOC, DOCX, XLS, XLSX, PNG, JPG ({t('maxSize')})\n                    </p>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={handleClose} disabled={isUploading}>\n                {t('cancel')}\n              </Button>\n              <Button type=\"submit\" disabled={!file || !category || !title || isUploading}>\n                {isUploading ? (\n                  <>\n                    <SovraLoader size=\"sm\" className=\"!h-4 !w-4 mr-2\" />\n                    {t('uploading')}\n                  </>\n                ) : (\n                  t('upload')\n                )}\n              </Button>\n            </div>\n          </form>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport { X, Download, FileText, CheckCircle, Clock, AlertTriangle, User, Calendar, Shield } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button, Badge } from '@/components/ui';\nimport { cn } from '@/lib/utils';\nimport type { LegalDocument, DocumentAuditEvent, DocumentStatus } from '@/types';\n\ninterface DocumentDetailProps {\n  document: LegalDocument;\n  auditEvents: DocumentAuditEvent[];\n  isOpen: boolean;\n  onClose: () => void;\n  onDownload?: () => void;\n  onDownloadCertificate?: () => void;\n  onSign?: () => void;\n  locale: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  t: (key: string, params?: any) => string;\n}\n\nconst statusConfig: Record<DocumentStatus, { color: string; label: string }> = {\n  draft: { color: 'text-[var(--color-text-secondary)]', label: 'draft' },\n  pending_signature: { color: 'text-amber-500', label: 'pending_signature' },\n  partially_signed: { color: 'text-[var(--color-primary)]', label: 'partially_signed' },\n  active: { color: 'text-green-500', label: 'active' },\n  expired: { color: 'text-red-500', label: 'expired' },\n  superseded: { color: 'text-[var(--color-text-muted)]', label: 'superseded' },\n  archived: { color: 'text-[var(--color-text-muted)]', label: 'archived' },\n};\n\nexport function DocumentDetail({\n  document,\n  auditEvents,\n  isOpen,\n  onClose,\n  onDownload,\n  onDownloadCertificate,\n  onSign,\n  locale,\n  t,\n}: DocumentDetailProps) {\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(locale === 'es' ? 'es-ES' : locale === 'pt' ? 'pt-BR' : 'en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const formatShortDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(locale === 'es' ? 'es-ES' : locale === 'pt' ? 'pt-BR' : 'en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const needsSignature =\n    document.status === 'pending_signature' || document.status === 'partially_signed';\n\n  const getActionIcon = (action: DocumentAuditEvent['action']) => {\n    switch (action) {\n      case 'created':\n      case 'uploaded':\n        return FileText;\n      case 'signed':\n        return CheckCircle;\n      case 'sent_for_signature':\n        return Clock;\n      case 'declined':\n      case 'rejected':\n        return AlertTriangle;\n      case 'verified':\n        return Shield;\n      default:\n        return FileText;\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"bg-[var(--color-surface)] rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\n            <div className=\"flex-1 min-w-0\">\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] truncate\">\n                {document.title}\n              </h2>\n              {document.version > 1 && (\n                <span className=\"text-sm text-[var(--color-text-secondary)]\">v{document.version}</span>\n              )}\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-hover)] transition-colors ml-4\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n            {/* Status Badge */}\n            <div className=\"flex items-center gap-3\">\n              <Badge\n                variant={document.status === 'active' ? 'success' : document.status === 'pending_signature' ? 'warning' : 'secondary'}\n                className=\"text-sm\"\n              >\n                {t(`status.${statusConfig[document.status].label}`)}\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-sm\">\n                {t(`categories.${document.category}`)}\n              </Badge>\n              {document.type === 'docusign' && (\n                <Badge variant=\"outline\" className=\"text-sm\">\n                  DocuSign\n                </Badge>\n              )}\n            </div>\n\n            {/* Description */}\n            {document.description && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-1\">\n                  {t('description')}\n                </h3>\n                <p className=\"text-sm text-[var(--color-text-secondary)]\">{document.description}</p>\n              </div>\n            )}\n\n            {/* Document Info */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              {document.effectiveDate && (\n                <div>\n                  <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                    <Calendar className=\"h-4 w-4\" />\n                    {t('effectiveDate')}\n                  </div>\n                  <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                    {formatShortDate(document.effectiveDate)}\n                  </p>\n                </div>\n              )}\n\n              {document.expirationDate && (\n                <div>\n                  <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                    <Calendar className=\"h-4 w-4\" />\n                    {t('expirationDate')}\n                  </div>\n                  <p className={cn(\n                    'text-sm font-medium',\n                    new Date(document.expirationDate) < new Date()\n                      ? 'text-red-500'\n                      : 'text-[var(--color-text-primary)]'\n                  )}>\n                    {formatShortDate(document.expirationDate)}\n                  </p>\n                </div>\n              )}\n\n              <div>\n                <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                  <User className=\"h-4 w-4\" />\n                  {t('createdBy')}\n                </div>\n                <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                  {document.createdByName || t('unknown')}\n                </p>\n              </div>\n\n              <div>\n                <div className=\"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] mb-1\">\n                  <Calendar className=\"h-4 w-4\" />\n                  {t('createdAt')}\n                </div>\n                <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                  {formatShortDate(document.createdAt)}\n                </p>\n              </div>\n            </div>\n\n            {/* DocuSign Signers */}\n            {document.type === 'docusign' && document.docusignMetadata?.signers && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">\n                  {t('signatures')}\n                </h3>\n                <div className=\"space-y-2\">\n                  {document.docusignMetadata.signers.map((signer, idx) => (\n                    <div\n                      key={idx}\n                      className=\"flex items-center justify-between p-3 bg-[var(--color-bg)] rounded-lg\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-8 w-8 rounded-full bg-[var(--color-primary)]/10 flex items-center justify-center\">\n                          <User className=\"h-4 w-4 text-[var(--color-primary)]\" />\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium text-[var(--color-text-primary)]\">\n                            {signer.name}\n                          </p>\n                          <p className=\"text-xs text-[var(--color-text-secondary)]\">\n                            {signer.role === 'sovra' ? 'Sovra' : t('partner')}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        {signer.status === 'signed' ? (\n                          <>\n                            <Badge variant=\"success\" className=\"text-xs\">\n                              {t('signed')}\n                            </Badge>\n                            {signer.signedAt && (\n                              <p className=\"text-xs text-[var(--color-text-secondary)] mt-1\">\n                                {formatDate(signer.signedAt)}\n                              </p>\n                            )}\n                          </>\n                        ) : signer.status === 'declined' ? (\n                          <Badge variant=\"destructive\" className=\"text-xs\">\n                            {t('declined')}\n                          </Badge>\n                        ) : (\n                          <Badge variant=\"warning\" className=\"text-xs\">\n                            {t('pending')}\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Upload Info */}\n            {document.type === 'upload' && document.uploadMetadata && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">\n                  {t('fileInfo')}\n                </h3>\n                <div className=\"p-3 bg-[var(--color-bg)] rounded-lg space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-[var(--color-text-secondary)]\">{t('fileName')}</span>\n                    <span className=\"text-[var(--color-text-primary)]\">{document.uploadMetadata.fileName}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-[var(--color-text-secondary)]\">{t('uploadedBy')}</span>\n                    <span className=\"text-[var(--color-text-primary)]\">{document.uploadMetadata.uploadedByName}</span>\n                  </div>\n                  {document.uploadMetadata.verificationStatus && (\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-[var(--color-text-secondary)]\">{t('verification')}</span>\n                      <Badge\n                        variant={\n                          document.uploadMetadata.verificationStatus === 'verified'\n                            ? 'success'\n                            : document.uploadMetadata.verificationStatus === 'rejected'\n                            ? 'destructive'\n                            : 'warning'\n                        }\n                      >\n                        {t(`verificationStatus.${document.uploadMetadata.verificationStatus}`)}\n                      </Badge>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Audit Timeline */}\n            {auditEvents.length > 0 && (\n              <div>\n                <h3 className=\"text-sm font-medium text-[var(--color-text-primary)] mb-3\">\n                  {t('history')}\n                </h3>\n                <div className=\"space-y-3\">\n                  {auditEvents.map((event) => {\n                    const Icon = getActionIcon(event.action);\n                    return (\n                      <div key={event.id} className=\"flex gap-3\">\n                        <div className=\"flex-shrink-0\">\n                          <div className=\"h-8 w-8 rounded-full bg-[var(--color-surface-hover)] flex items-center justify-center\">\n                            <Icon className=\"h-4 w-4 text-[var(--color-text-secondary)]\" />\n                          </div>\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm text-[var(--color-text-primary)]\">\n                            {t(`auditActions.${event.action}`)}\n                            {event.actorName && (\n                              <span className=\"text-[var(--color-text-secondary)]\"> - {event.actorName}</span>\n                            )}\n                          </p>\n                          <p className=\"text-xs text-[var(--color-text-secondary)]\">\n                            {formatDate(event.timestamp)}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"flex items-center justify-end gap-3 p-4 border-t border-[var(--color-border)]\">\n            {needsSignature && onSign && (\n              <Button onClick={onSign}>{t('sign')}</Button>\n            )}\n            {onDownload && (\n              <Button variant=\"outline\" onClick={onDownload}>\n                <Download className=\"h-4 w-4 mr-2\" />\n                {t('downloadDocument')}\n              </Button>\n            )}\n            {document.type === 'docusign' &&\n              document.docusignMetadata?.certificateUrl &&\n              onDownloadCertificate && (\n                <Button variant=\"outline\" onClick={onDownloadCertificate}>\n                  <Shield className=\"h-4 w-4 mr-2\" />\n                  {t('downloadCertificate')}\n                </Button>\n              )}\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { FileText, Plus } from 'lucide-react';\nimport { Button, Card, CardContent } from '@/components/ui';\nimport { DocumentCard } from './DocumentCard';\nimport { DocumentFilters } from './DocumentFilters';\nimport type { LegalDocument, DocumentCategory, DocumentStatus } from '@/types';\n\ninterface DocumentListProps {\n  documents: LegalDocument[];\n  locale: string;\n  onView: (doc: LegalDocument) => void;\n  onDownload: (doc: LegalDocument) => void;\n  onSign?: (doc: LegalDocument) => void;\n  onUpload?: () => void;\n  canUpload?: boolean;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  t: (key: string, params?: any) => string;\n}\n\nexport function DocumentList({\n  documents,\n  locale,\n  onView,\n  onDownload,\n  onSign,\n  onUpload,\n  canUpload = false,\n  t,\n}: DocumentListProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<DocumentCategory | 'all'>('all');\n  const [selectedStatus, setSelectedStatus] = useState<DocumentStatus | 'all'>('all');\n\n  const filteredDocuments = useMemo(() => {\n    return documents.filter((doc) => {\n      // Search filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesTitle = doc.title.toLowerCase().includes(query);\n        const matchesDescription = doc.description?.toLowerCase().includes(query);\n        if (!matchesTitle && !matchesDescription) return false;\n      }\n\n      // Category filter\n      if (selectedCategory !== 'all' && doc.category !== selectedCategory) {\n        return false;\n      }\n\n      // Status filter\n      if (selectedStatus !== 'all' && doc.status !== selectedStatus) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [documents, searchQuery, selectedCategory, selectedStatus]);\n\n  // Group documents by status for display\n  const pendingDocs = filteredDocuments.filter(\n    (d) => d.status === 'pending_signature' || d.status === 'partially_signed'\n  );\n  const activeDocs = filteredDocuments.filter((d) => d.status === 'active');\n  const otherDocs = filteredDocuments.filter(\n    (d) =>\n      d.status !== 'pending_signature' &&\n      d.status !== 'partially_signed' &&\n      d.status !== 'active'\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Upload Button */}\n      <div className=\"flex items-center justify-between\">\n        <DocumentFilters\n          onSearch={setSearchQuery}\n          onCategoryChange={setSelectedCategory}\n          onStatusChange={setSelectedStatus}\n          selectedCategory={selectedCategory}\n          selectedStatus={selectedStatus}\n          t={t}\n        />\n        {canUpload && onUpload && (\n          <Button onClick={onUpload} className=\"ml-4 flex-shrink-0\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            {t('uploadDocument')}\n          </Button>\n        )}\n      </div>\n\n      {/* Document Lists */}\n      {filteredDocuments.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <FileText className=\"mx-auto h-12 w-12 text-[var(--color-text-secondary)] opacity-50\" />\n            <p className=\"mt-4 text-[var(--color-text-secondary)]\">\n              {searchQuery || selectedCategory !== 'all' || selectedStatus !== 'all'\n                ? t('noDocumentsFiltered')\n                : t('noDocuments')}\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-8\">\n          {/* Pending Documents */}\n          {pendingDocs.length > 0 && (\n            <div>\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-4 flex items-center gap-2\">\n                <span className=\"h-2 w-2 rounded-full bg-amber-500\" />\n                {t('pendingSignature')} ({pendingDocs.length})\n              </h2>\n              <div className=\"space-y-3\">\n                {pendingDocs.map((doc, index) => (\n                  <motion.div\n                    key={doc.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: index * 0.05 }}\n                  >\n                    <DocumentCard\n                      document={doc}\n                      locale={locale}\n                      onView={() => onView(doc)}\n                      onDownload={() => onDownload(doc)}\n                      onSign={onSign ? () => onSign(doc) : undefined}\n                      t={t}\n                    />\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Active Documents */}\n          {activeDocs.length > 0 && (\n            <div>\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-4 flex items-center gap-2\">\n                <span className=\"h-2 w-2 rounded-full bg-green-500\" />\n                {t('activeDocuments')} ({activeDocs.length})\n              </h2>\n              <div className=\"space-y-3\">\n                {activeDocs.map((doc, index) => (\n                  <motion.div\n                    key={doc.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: index * 0.05 }}\n                  >\n                    <DocumentCard\n                      document={doc}\n                      locale={locale}\n                      onView={() => onView(doc)}\n                      onDownload={() => onDownload(doc)}\n                      t={t}\n                    />\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Other Documents */}\n          {otherDocs.length > 0 && (\n            <div>\n              <h2 className=\"text-lg font-semibold text-[var(--color-text-primary)] mb-4 flex items-center gap-2\">\n                <span className=\"h-2 w-2 rounded-full bg-gray-400\" />\n                {t('otherDocuments')} ({otherDocs.length})\n              </h2>\n              <div className=\"space-y-3\">\n                {otherDocs.map((doc, index) => (\n                  <motion.div\n                    key={doc.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: index * 0.05 }}\n                  >\n                    <DocumentCard\n                      document={doc}\n                      locale={locale}\n                      onView={() => onView(doc)}\n                      onDownload={() => onDownload(doc)}\n                      t={t}\n                    />\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { AlertTriangle, Clock } from 'lucide-react';\nimport { Badge } from '@/components/ui';\nimport { cn } from '@/lib/utils';\n\ninterface ExpirationBadgeProps {\n  expirationDate: string;\n  locale: string;\n  className?: string;\n}\n\nexport function ExpirationBadge({ expirationDate, locale, className }: ExpirationBadgeProps) {\n  const now = new Date();\n  const expDate = new Date(expirationDate);\n  const daysUntilExpiry = Math.ceil((expDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n\n  const formatDate = () => {\n    return expDate.toLocaleDateString(locale === 'es' ? 'es-ES' : locale === 'pt' ? 'pt-BR' : 'en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  if (daysUntilExpiry < 0) {\n    // Expired\n    return (\n      <Badge variant=\"destructive\" className={cn('flex items-center gap-1', className)}>\n        <AlertTriangle className=\"h-3 w-3\" />\n        Expired {formatDate()}\n      </Badge>\n    );\n  }\n\n  if (daysUntilExpiry <= 7) {\n    // Expiring very soon\n    return (\n      <Badge variant=\"destructive\" className={cn('flex items-center gap-1', className)}>\n        <AlertTriangle className=\"h-3 w-3\" />\n        Expires in {daysUntilExpiry} day{daysUntilExpiry !== 1 ? 's' : ''}\n      </Badge>\n    );\n  }\n\n  if (daysUntilExpiry <= 30) {\n    // Expiring soon\n    return (\n      <Badge variant=\"warning\" className={cn('flex items-center gap-1', className)}>\n        <Clock className=\"h-3 w-3\" />\n        Expires in {daysUntilExpiry} days\n      </Badge>\n    );\n  }\n\n  // Not expiring soon\n  return (\n    <Badge variant=\"secondary\" className={cn('flex items-center gap-1', className)}>\n      <Clock className=\"h-3 w-3\" />\n      Valid until {formatDate()}\n    </Badge>\n  );\n}\n","'use client';\n\nimport { useState, useEffect, useCallback, use } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { useRouter } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { hasPermission } from '@/lib/permissions';\nimport {\n  DocumentList,\n  DocumentUploadModal,\n  DocumentDetail,\n  type UploadData,\n} from '@/components/legal';\nimport { SovraLoader } from '@/components/ui';\nimport type { LegalDocument, DocumentAuditEvent, User, UserRole, DocumentCategory } from '@/types';\n\ninterface LegalPageProps {\n  params: Promise<{ locale: string }>;\n}\n\ninterface AllowedCategory {\n  id: DocumentCategory;\n  name: Record<string, string>;\n  description: Record<string, string>;\n  requiresVerification: boolean;\n}\n\ninterface PartnerInfo {\n  partnerId: string;\n  partnerName: string;\n}\n\nexport default function LegalPage({ params }: LegalPageProps) {\n  const { locale } = use(params);\n  const t = useTranslations('legal');\n  const router = useRouter();\n\n  const [documents, setDocuments] = useState<LegalDocument[]>([]);\n  const [allowedCategories, setAllowedCategories] = useState<AllowedCategory[]>([]);\n  const [partnerInfo, setPartnerInfo] = useState<PartnerInfo | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthorized, setIsAuthorized] = useState<boolean | null>(null);\n\n  // Modals\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n  const [selectedDocument, setSelectedDocument] = useState<LegalDocument | null>(null);\n  const [auditEvents, setAuditEvents] = useState<DocumentAuditEvent[]>([]);\n  const [isDetailLoading, setIsDetailLoading] = useState(false);\n\n  // Fetch documents\n  const fetchDocuments = useCallback(async () => {\n    try {\n      const res = await fetch('/api/partners/legal');\n      if (res.ok) {\n        const data = await res.json();\n        setDocuments(data.documents || []);\n        setAllowedCategories(data.allowedCategories || []);\n        if (data.partnerId && data.partnerName) {\n          setPartnerInfo({ partnerId: data.partnerId, partnerName: data.partnerName });\n        }\n        console.log('[LegalPage] Loaded', data.documents?.length || 0, 'documents for partner:', data.partnerName, data.partnerId);\n      }\n    } catch (error) {\n      console.error('Failed to fetch documents:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    async function checkAccessAndFetch() {\n      try {\n        // Check user permissions\n        const userRes = await fetch('/api/partners/auth/me');\n        if (!userRes.ok) {\n          router.replace(`/${locale}/partners/login`);\n          return;\n        }\n        const userData = await userRes.json();\n        const user = userData.user as User;\n\n        if (!hasPermission(user.role as UserRole, 'legal:view')) {\n          router.replace(`/${locale}/partners/portal`);\n          return;\n        }\n\n        setIsAuthorized(true);\n        await fetchDocuments();\n      } catch (error) {\n        console.error('Failed to check access:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    checkAccessAndFetch();\n  }, [locale, router, fetchDocuments]);\n\n  // Handle view document\n  const handleView = async (doc: LegalDocument) => {\n    setSelectedDocument(doc);\n    setIsDetailLoading(true);\n\n    try {\n      const res = await fetch(`/api/partners/legal/${doc.id}`);\n      if (res.ok) {\n        const data = await res.json();\n        setAuditEvents(data.auditEvents || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch document details:', error);\n    } finally {\n      setIsDetailLoading(false);\n    }\n  };\n\n  // Handle download\n  const handleDownload = async (doc: LegalDocument) => {\n    try {\n      const res = await fetch(`/api/partners/legal/${doc.id}/download`);\n      if (res.ok) {\n        const blob = await res.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = doc.uploadMetadata?.fileName || `${doc.title}.pdf`;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Failed to download document:', error);\n    }\n  };\n\n  // Handle download certificate\n  const handleDownloadCertificate = async () => {\n    if (!selectedDocument || selectedDocument.type !== 'docusign') return;\n\n    try {\n      const res = await fetch(`/api/partners/legal/${selectedDocument.id}/download?type=certificate`);\n      if (res.ok) {\n        const blob = await res.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${selectedDocument.title}_certificate.pdf`;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Failed to download certificate:', error);\n    }\n  };\n\n  // Handle sign (redirects to DocuSign for now)\n  const handleSign = async (doc: LegalDocument) => {\n    if (doc.type === 'docusign' && doc.docusignMetadata?.envelopeId) {\n      // For DocuSign documents, the user should have received an email\n      // We could implement embedded signing here\n      alert(t('errors.checkEmailForSigning') || 'Please check your email for the signing link.');\n    }\n  };\n\n  // Handle upload\n  const handleUpload = async (data: UploadData) => {\n    const formData = new FormData();\n    formData.append('file', data.file);\n    formData.append('category', data.category);\n    formData.append('title', data.title);\n    if (data.description) formData.append('description', data.description);\n    if (data.expirationDate) formData.append('expirationDate', data.expirationDate);\n\n    const res = await fetch('/api/partners/legal', {\n      method: 'POST',\n      body: formData,\n    });\n\n    if (!res.ok) {\n      const error = await res.json();\n      throw new Error(error.error || 'Upload failed');\n    }\n\n    // Refresh documents list\n    await fetchDocuments();\n  };\n\n  // Localized categories for upload modal\n  const localizedCategories = allowedCategories.map((cat) => ({\n    id: cat.id,\n    name: cat.name[locale] || cat.name.en,\n    description: cat.description[locale] || cat.description.en,\n  }));\n\n  if (isLoading || isAuthorized === null) {\n    return (\n      <div className=\"flex h-96 items-center justify-center\">\n        <SovraLoader size=\"md\" className=\"text-[var(--color-primary)]\" />\n      </div>\n    );\n  }\n\n  if (!isAuthorized) {\n    return null;\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-6\"\n    >\n      <div>\n        <h1 className=\"text-2xl font-bold text-[var(--color-text-primary)]\">{t('title')}</h1>\n        {partnerInfo && (\n          <p className=\"text-xs text-[var(--color-text-secondary)] mt-1\">\n            Partner: {partnerInfo.partnerName} (ID: <code className=\"bg-[var(--color-surface-hover)] px-1 py-0.5 rounded\">{partnerInfo.partnerId}</code>)\n          </p>\n        )}\n      </div>\n\n      <DocumentList\n        documents={documents}\n        locale={locale}\n        onView={handleView}\n        onDownload={handleDownload}\n        onSign={handleSign}\n        onUpload={() => setIsUploadModalOpen(true)}\n        canUpload={allowedCategories.length > 0}\n        t={t}\n      />\n\n      {/* Upload Modal */}\n      <DocumentUploadModal\n        isOpen={isUploadModalOpen}\n        onClose={() => setIsUploadModalOpen(false)}\n        onUpload={handleUpload}\n        allowedCategories={localizedCategories}\n        t={t}\n      />\n\n      {/* Document Detail Modal */}\n      {selectedDocument && (\n        <DocumentDetail\n          document={selectedDocument}\n          auditEvents={auditEvents}\n          isOpen={!!selectedDocument}\n          onClose={() => {\n            setSelectedDocument(null);\n            setAuditEvents([]);\n          }}\n          onDownload={() => handleDownload(selectedDocument)}\n          onDownloadCertificate={\n            selectedDocument.type === 'docusign' &&\n            selectedDocument.docusignMetadata?.certificateUrl\n              ? handleDownloadCertificate\n              : undefined\n          }\n          onSign={\n            selectedDocument.status === 'pending_signature' ||\n            selectedDocument.status === 'partially_signed'\n              ? () => handleSign(selectedDocument)\n              : undefined\n          }\n          locale={locale}\n          t={t}\n        />\n      )}\n    </motion.div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name Pen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pen = createLucideIcon('pen', __iconNode);\n\nexport default Pen;\n"],"names":[],"mappings":"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","ignoreList":[7]}